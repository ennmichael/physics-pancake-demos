{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?803f","webpack:///./src/components/DemoChoice.vue?1f7b","webpack:///./src/components/mass-aggregate/ParticleDemo.vue?ba73","webpack:///./src/engine/Simulation.js","webpack:///./src/NotImplemented.js","webpack:///src/components/Demo.vue","webpack:///./src/components/Demo.vue","webpack:///./src/components/Demo.vue?9a6b","webpack:///./src/components/GravitySlider.vue?b57e","webpack:///src/components/GravitySlider.vue","webpack:///./src/components/GravitySlider.vue?aa05","webpack:///./src/components/GravitySlider.vue","webpack:///./src/components/RestartButton.vue?e386","webpack:///./src/components/RestartButton.vue","webpack:///./src/components/InteractiveSimulationDisplay.vue?659f","webpack:///./src/utils.js","webpack:///./src/Vector.js","webpack:///./src/components/SimulationDisplay.vue?d6c8","webpack:///./src/graphics.js","webpack:///src/components/SimulationDisplay.vue","webpack:///./src/components/SimulationDisplay.vue?b425","webpack:///./src/components/SimulationDisplay.vue","webpack:///src/components/InteractiveSimulationDisplay.vue","webpack:///./src/components/InteractiveSimulationDisplay.vue?fcf4","webpack:///./src/components/InteractiveSimulationDisplay.vue","webpack:///./src/engine/Engine.js","webpack:///./src/engine/mass-aggregate/Particle.js","webpack:///./src/engine/mass-aggregate/Contact.js","webpack:///./src/engine/mass-aggregate/ParticleContact.js","webpack:///./src/engine/mass-aggregate/TerrainContact.js","webpack:///./src/engine/mass-aggregate/MassAggregateEngine.js","webpack:///./src/Line.js","webpack:///./src/engine/mass-aggregate/MassAggregateDrawing.js","webpack:///src/components/mass-aggregate/ParticleDemo.vue","webpack:///./src/components/mass-aggregate/ParticleDemo.vue?9e31","webpack:///./src/components/mass-aggregate/ParticleDemo.vue","webpack:///./src/components/mass-aggregate/SpringDemo.vue?3dea","webpack:///./src/components/StiffnessSlider.vue?cbe9","webpack:///src/components/StiffnessSlider.vue","webpack:///./src/components/StiffnessSlider.vue?8c8b","webpack:///./src/components/StiffnessSlider.vue","webpack:///./src/engine/mass-aggregate/Spring.js","webpack:///./src/engine/mass-aggregate/ElasticSpring.js","webpack:///src/components/mass-aggregate/SpringDemo.vue","webpack:///./src/components/mass-aggregate/SpringDemo.vue?0c07","webpack:///./src/components/mass-aggregate/SpringDemo.vue","webpack:///./src/components/mass-aggregate/TerrainDemo.vue?b405","webpack:///./src/components/RestitutionSlider.vue?5c29","webpack:///src/components/RestitutionSlider.vue","webpack:///./src/components/RestitutionSlider.vue?26bb","webpack:///./src/components/RestitutionSlider.vue","webpack:///./src/components/AngleSlider.vue?06cd","webpack:///src/components/AngleSlider.vue","webpack:///./src/components/AngleSlider.vue?5e1e","webpack:///./src/components/AngleSlider.vue","webpack:///./src/components/LengthSlider.vue?7169","webpack:///src/components/LengthSlider.vue","webpack:///./src/components/LengthSlider.vue?460f","webpack:///./src/components/LengthSlider.vue","webpack:///./src/Polygon.js","webpack:///./src/engine/mass-aggregate/TerrainElement.js","webpack:///src/components/mass-aggregate/TerrainDemo.vue","webpack:///./src/components/mass-aggregate/TerrainDemo.vue?6d9e","webpack:///./src/components/mass-aggregate/TerrainDemo.vue","webpack:///./src/components/mass-aggregate/ParticleCollisionDemo.vue?5367","webpack:///./src/components/ParticleMassSliders.vue?9aca","webpack:///src/components/ParticleMassSliders.vue","webpack:///./src/components/ParticleMassSliders.vue?51ad","webpack:///./src/components/ParticleMassSliders.vue","webpack:///src/components/mass-aggregate/ParticleCollisionDemo.vue","webpack:///./src/components/mass-aggregate/ParticleCollisionDemo.vue?0b2e","webpack:///./src/components/mass-aggregate/ParticleCollisionDemo.vue","webpack:///./src/components/mass-aggregate/RodDemo.vue?1d19","webpack:///./src/engine/mass-aggregate/Rod.js","webpack:///src/components/mass-aggregate/RodDemo.vue","webpack:///./src/components/mass-aggregate/RodDemo.vue?fe41","webpack:///./src/components/mass-aggregate/RodDemo.vue","webpack:///src/components/DemoChoice.vue","webpack:///./src/components/DemoChoice.vue?1660","webpack:///./src/components/DemoChoice.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","DemoChoicevue_type_template_id_3a290d48_render","directives","rawName","expression","on","change","$event","$$selectedVal","Array","filter","target","options","selected","map","val","_value","currentDemo","multiple","_l","demo","title","domProps","component","_v","_s","tag","DemoChoicevue_type_template_id_3a290d48_staticRenderFns","ParticleDemovue_type_template_id_f204f8a6_render","attrs","simulation","click","restartEngine","engine","ParticleDemovue_type_template_id_f204f8a6_staticRenderFns","Simulation","constructor","drawing","redraw","integrateTime","time","NotImplemented","Error","Demo_render","Demo_staticRenderFns","Demovue_type_script_lang_js_","[object Object]","undefined","createEngine","createDrawing","context","document","getElementsByTagName","getContext","methods","previousEngine","components_Demovue_type_script_lang_js_","componentNormalizer","__file","Demo","GravitySlidervue_type_template_id_2d52b358_render","for","modifiers","number","id","type","min","max","step","__r","$set","_n","blur","$forceUpdate","GravitySlidervue_type_template_id_2d52b358_staticRenderFns","GravitySlidervue_type_script_lang_js_","props","components_GravitySlidervue_type_script_lang_js_","GravitySlider_component","GravitySlider","RestartButtonvue_type_template_id_f7052c56_render","_g","$listeners","RestartButtonvue_type_template_id_f7052c56_staticRenderFns","script","RestartButton_component","RestartButton","InteractiveSimulationDisplayvue_type_template_id_683de774_render","mousemove","onMouseMove","mouseup","onMouseUp","mousedown","onMouseDown","mouseleave","onMouseLeave","InteractiveSimulationDisplayvue_type_template_id_683de774_staticRenderFns","epsilon","sequence","x","minKey","elem","k","almostEquals","a","b","Math","abs","valueIsBetween","limits","minLimit","maxLimit","sameSigns","Vector","zero","y","reset","normal","positiveDirection","normalized","dot","negated","flippedTowards","direction","cloned","magnitude","sqrt","magnitudeSquared","scaled","isNormalized","other","cross","added","subtracted","factor","add","subtract","scale","distanceSquared","distance","projected","SimulationDisplayvue_type_template_id_30c681a1_render","width","height","reEmit","$emit","SimulationDisplayvue_type_template_id_30c681a1_staticRenderFns","clearContext","style","fillStyle","fillRect","canvas","drawCircle","position","radius","beginPath","fromNormalizedDeviceCoordinates","xRadius","yRadius","ellipse","PI","fill","drawLine","line","strokeStyle","origin","moveTo","end","lineTo","stroke","drawPolygon","polygon","edgesAreConnected","points","edges","edge","point","coordinates","toNormalizedDeviceCoordinates","SimulationDisplayvue_type_script_lang_js_","running","frameCallback","requestAnimationFrame","eventName","event","clickPosition","left","top","getBoundingClientRect","Vector_Vector","clientX","clientY","components_SimulationDisplayvue_type_script_lang_js_","SimulationDisplay_component","SimulationDisplay","minSelectionDistance","minSelectionDistanceSquared","particleThrowMultiplier","InteractiveSimulationDisplayvue_type_script_lang_js_","components","selection","particle","wasFixed","previousPosition","mousePosition","velocity","fixed","throwSelectedParticle","newlySelectedParticle","delta","particles","selectionDistance","components_InteractiveSimulationDisplayvue_type_script_lang_js_","InteractiveSimulationDisplay_component","InteractiveSimulationDisplay","maxTimeDelta","Engine","timestep","timeAccumulator","lastIntegrationTime","currentTime","timeDelta","integrateStep","baseRadius","Particle","mass","gravityScale","fixedRadius","force","applyGravity","gravity","update","damping","updateVelocity","applyDamping","updatePosition","overlaps","radiiSum","speed","speedSquared","pow","acceleration","Contact","solve","ParticleContact","super","solveInterpenetration","solveBounce","interpenetration","netSpeed","netMass","minimumBounceSpeed","minimumBounceSpeedSquared","TerrainContact","terrainElement","penetrationDepth","removePenetration","bounceParticle","slideParticle","applyFriction","offset","friction","normalVelocity","restitution","closestEdge","positionBound","positionWithinBounds","MassAggregateEngine","defaultTimestep","springs","terrain","clearUselessParticles","resetForces","updateSprings","solveContacts","updateParticles","findContacts","contact","findParticleContacts","findTerrainContacts","otherParticle","containsPoint","spring","Line","TypeError","rayIntersects","u","intersectionParameters","intersects","intersection","div","closestPoint","opposite","lengthSquared","visualForceScale","backgroundStyle","particleColor","hue","saturation","lightness","maxColorHue","springStyle","terrainStyle","forceStyle","MassAggregateDrawing","drawingForces","drawingTerrain","drawingSprings","drawingParticles","clear","drawTerrain","drawParticles","drawSprings","drawForces","currentHue","hueStep","ParticleDemovue_type_script_lang_js_","mixins","MassAggregateEngine_MassAggregateEngine","Particle_Particle","MassAggregateDrawing_MassAggregateDrawing","mass_aggregate_ParticleDemovue_type_script_lang_js_","ParticleDemo_component","ParticleDemo","SpringDemovue_type_template_id_12d6fe20_render","model","callback","$$v","stiffness","SpringDemovue_type_template_id_12d6fe20_staticRenderFns","StiffnessSlidervue_type_template_id_ebf97798_render","input","Number","StiffnessSlidervue_type_template_id_ebf97798_staticRenderFns","StiffnessSlidervue_type_script_lang_js_","components_StiffnessSlidervue_type_script_lang_js_","StiffnessSlider_component","StiffnessSlider","Spring","restingLength","currentLength","contract","fromParticle","toParticle","lengthDelta","ElasticSpring","contractionMagnitude","SpringDemovue_type_script_lang_js_","watch","newStiffness","ElasticSpring_ElasticSpring","mass_aggregate_SpringDemovue_type_script_lang_js_","SpringDemo_component","SpringDemo","TerrainDemovue_type_template_id_414202dc_render","platform","platformAngle","platformLength","TerrainDemovue_type_template_id_414202dc_staticRenderFns","RestitutionSlidervue_type_template_id_b516d652_render","RestitutionSlidervue_type_template_id_b516d652_staticRenderFns","RestitutionSlidervue_type_script_lang_js_","components_RestitutionSlidervue_type_script_lang_js_","RestitutionSlider_component","RestitutionSlider","AngleSlidervue_type_template_id_d568e0de_render","AngleSlidervue_type_template_id_d568e0de_staticRenderFns","AngleSlidervue_type_script_lang_js_","components_AngleSlidervue_type_script_lang_js_","AngleSlider_component","AngleSlider","LengthSlidervue_type_template_id_20570698_render","LengthSlidervue_type_template_id_20570698_staticRenderFns","LengthSlidervue_type_script_lang_js_","components_LengthSlidervue_type_script_lang_js_","LengthSlider_component","LengthSlider","Polygon","vertices","fromEdges","from","findEdges","isVertex","ray","countIntersections","some","vertex","reduce","acc","TerrainElement","startingPosition","TerrainDemovue_type_script_lang_js_","platformRestitution","Polygon_Polygon","fromVertices","updatePlatformLayout","lengthHalf","cos","sin","mass_aggregate_TerrainDemovue_type_script_lang_js_","TerrainDemo_component","TerrainDemo","ParticleCollisionDemovue_type_template_id_46c8e866_render","firingForce","ParticleCollisionDemovue_type_template_id_46c8e866_staticRenderFns","ParticleMassSlidersvue_type_template_id_1055ef77_render","index","ParticleMassSlidersvue_type_template_id_1055ef77_staticRenderFns","ParticleMassSlidersvue_type_script_lang_js_","components_ParticleMassSlidersvue_type_script_lang_js_","ParticleMassSliders_component","ParticleMassSliders","leftParticlePosition","rightParticlePosition","ParticleCollisionDemovue_type_script_lang_js_FiredParticle","params","fired","ParticleCollisionDemovue_type_script_lang_js_","mass_aggregate_ParticleCollisionDemovue_type_script_lang_js_","ParticleCollisionDemo_component","ParticleCollisionDemo","RodDemovue_type_template_id_dde9fe72_render","RodDemovue_type_template_id_dde9fe72_staticRenderFns","Rod","contractOne","contractBoth","RodDemovue_type_script_lang_js_","Rod_Rod","mass_aggregate_RodDemovue_type_script_lang_js_","RodDemo_component","RodDemo","DemoChoicevue_type_script_lang_js_","demos","components_DemoChoicevue_type_script_lang_js_","DemoChoice_component","DemoChoice","Appvue_type_script_lang_js_","src_Appvue_type_script_lang_js_","App_component","App","Vue","config","productionTip","el","h"],"mappings":"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","file":"js/app.ab630ba0.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/physics-pancake/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DemoChoice')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentDemo),expression:\"currentDemo\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.currentDemo=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.demos),function(demo){return _c('option',{key:demo.title,domProps:{\"value\":demo.component}},[_vm._v(\"\\n      \"+_vm._s(demo.title)+\"\\n    \")])}),0),_c(_vm.currentDemo,{tag:\"component\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tbody',[_c('tr',[_c('td',[_c('InteractiveSimulationDisplay',{attrs:{\"simulation\":_vm.simulation}})],1)]),_c('tr',[_c('td',[_c('RestartButton',{on:{\"click\":_vm.restartEngine}})],1)]),_c('tr',[_c('td',[_c('GravitySlider',{attrs:{\"engine\":_vm.simulation.engine}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class Simulation {\r\n    constructor({ drawing, engine }) {\r\n        this.engine = engine;\r\n        this.drawing = drawing;\r\n    }\r\n\r\n    redraw() {\r\n        this.drawing.redraw(this.engine);\r\n    }\r\n\r\n    integrateTime(time) {\r\n        this.engine.integrateTime(time);\r\n    }\r\n}\r\n","export default class NotImplemented extends Error {\r\n}\r\n","<script>\r\nimport Simulation from '../engine/Simulation';\r\nimport NotImplemented from '../NotImplemented';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            simulation: undefined,\r\n        };\r\n    },\r\n    created() {\r\n        this.simulation = new Simulation({\r\n            engine: this.createEngine({}),\r\n            drawing: this.createDrawing(),\r\n        });\r\n    },\r\n    mounted() {\r\n        this.simulation.drawing.context = document.getElementsByTagName('canvas')[0].getContext('2d');\r\n    },\r\n    methods: {\r\n        createEngine(previousEngine) {\r\n            throw new NotImplemented();\r\n        },\r\n        createDrawing() {\r\n            // The created drawing can leave its context undefined.\r\n            // mounted() will set up the context properly.\r\n            throw new NotImplemented();\r\n        },\r\n        restartEngine() {\r\n            this.simulation.engine = this.createEngine(this.simulation.engine);\r\n        },\r\n    }\r\n};\r\n</script>\r\n","var render, staticRenderFns\nimport script from \"./Demo.vue?vue&type=script&lang=js&\"\nexport * from \"./Demo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Demo.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{attrs:{\"for\":\"gravity-slider\"}},[_vm._v(\"\\n    Gravity\\n  \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.engine.gravity),expression:\"engine.gravity\",modifiers:{\"number\":true}}],attrs:{\"id\":\"gravity-slider\",\"type\":\"range\",\"min\":\"0\",\"max\":\"1e-5\",\"step\":\"1e-9\"},domProps:{\"value\":(_vm.engine.gravity)},on:{\"__r\":function($event){_vm.$set(_vm.engine, \"gravity\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <label for=\"gravity-slider\">\r\n      Gravity\r\n    </label>\r\n    <input\r\n      id=\"gravity-slider\"\r\n      v-model.number=\"engine.gravity\"\r\n      type=\"range\"\r\n      min=\"0\"\r\n      max=\"1e-5\"\r\n      step=\"1e-9\"\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        engine: Object,\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GravitySlider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GravitySlider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GravitySlider.vue?vue&type=template&id=2d52b358&\"\nimport script from \"./GravitySlider.vue?vue&type=script&lang=js&\"\nexport * from \"./GravitySlider.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"GravitySlider.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',_vm._g({},_vm.$listeners),[_vm._v(\"\\n  Restart\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./RestartButton.vue?vue&type=template&id=f7052c56&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"RestartButton.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('SimulationDisplay',{attrs:{\"simulation\":_vm.simulation},on:{\"mousemove\":_vm.onMouseMove,\"mouseup\":_vm.onMouseUp,\"mousedown\":_vm.onMouseDown,\"mouseleave\":_vm.onMouseLeave}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const epsilon = 1e-5;\r\n\r\nexport function min(sequence, key = x => x) {\r\n    let result;\r\n    let minKey;\r\n\r\n    for (const elem of sequence) {\r\n        const k = key(elem);\r\n        if (k === undefined)\r\n            continue;\r\n        if (result === undefined || minKey === undefined || k < minKey) {\r\n            result = elem;\r\n            minKey = k;\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport function almostEquals(a, b, x = epsilon) {\r\n    return Math.abs(a - b) <= x;\r\n}\r\n\r\nexport function valueIsBetween({ value, limits }) {\r\n    const minLimit = Math.min(...limits);\r\n    const maxLimit = Math.max(...limits);\r\n    return minLimit <= value && value <= maxLimit;\r\n}\r\n\r\nexport function randomRange(min, max) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\nexport function sameSigns(a, b) {\r\n    return (a > 0 && b > 0) || (a < 0 && b < 0);\r\n}\r\n","import { almostEquals } from './utils';\r\n\r\nexport default class Vector {\r\n    static get zero() {\r\n        return new Vector(0, 0);\r\n    }\r\n\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    reset() {\r\n        this.x = 0;\r\n        this.y = 0;\r\n    }\r\n\r\n    normal(positiveDirection) {\r\n        const normal = new Vector(-this.y, this.x).normalized;\r\n        if (normal.dot(positiveDirection) > 0)\r\n            return normal;\r\n        return normal.negated;\r\n    }\r\n\r\n    flippedTowards(direction) {\r\n        if (this.dot(direction) > 0)\r\n            return this.cloned;\r\n        return this.negated;\r\n    }\r\n\r\n    get cloned() {\r\n        return new Vector(this.x, this.y);\r\n    }\r\n\r\n    get magnitude() {\r\n        return Math.sqrt(this.magnitudeSquared);\r\n    }\r\n\r\n    get magnitudeSquared() {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n\r\n    get normalized() {\r\n        return this.scaled(1 / this.magnitude);\r\n    }\r\n\r\n    get negated() {\r\n        return new Vector(-this.x, -this.y);\r\n    }\r\n\r\n    get isNormalized() {\r\n        return almostEquals(this.magnitudeSquared, 1);\r\n    }\r\n\r\n    almostEquals(other) {\r\n        return almostEquals(this.x, other.x) && almostEquals(this.y, other.y);\r\n    }\r\n\r\n    dot(other) {\r\n        return this.x * other.x + this.y * other.y;\r\n    }\r\n\r\n    cross(other) {\r\n        return this.x * other.y - this.y * other.x;\r\n    }\r\n\r\n    added(other) {\r\n        return new Vector(this.x + other.x, this.y + other.y);\r\n    }\r\n\r\n    subtracted(other) {\r\n        return new Vector(this.x - other.x, this.y - other.y);\r\n    }\r\n\r\n    scaled(factor) {\r\n        return new Vector(this.x * factor, this.y * factor);\r\n    }\r\n\r\n    add(other) {\r\n        this.x += other.x;\r\n        this.y += other.y;\r\n    }\r\n\r\n    subtract(other) {\r\n        this.x -= other.x;\r\n        this.y -= other.y;\r\n    }\r\n\r\n    scale(factor) {\r\n        this.x *= factor;\r\n        this.y *= factor;\r\n    }\r\n\r\n    distanceSquared(other) {\r\n        return this.subtracted(other).magnitudeSquared;\r\n    }\r\n\r\n    distance(other) {\r\n        return Math.sqrt(this.distanceSquared(other));\r\n    }\r\n\r\n    direction(other) {\r\n        return other.subtracted(this).normalized;\r\n    }\r\n\r\n    projected(other) {\r\n        if (!other.isNormalized)\r\n            other = other.normalized;\r\n        return other.normalized.scaled(this.dot(other));\r\n    }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{attrs:{\"width\":\"500\",\"height\":\"500\"},on:{\"mousemove\":function($event){_vm.reEmit('mousemove', $event)},\"mousedown\":function($event){_vm.reEmit('mousedown', $event)},\"mouseup\":function($event){_vm.reEmit('mouseup', $event)},\"mouseleave\":function($event){_vm.$emit('mouseleave')}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vector from './Vector';\r\n\r\nexport function clearContext(context, style) {\r\n    if (style)\r\n        context.fillStyle = style;\r\n    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n}\r\n\r\nexport function drawCircle(context, { position, radius }, style) {\r\n    if (style)\r\n        context.fillStyle = style;\r\n    context.beginPath();\r\n    position = fromNormalizedDeviceCoordinates(position, context.canvas);\r\n    const xRadius = context.canvas.width * radius / 2;\r\n    const yRadius = context.canvas.height * radius / 2;\r\n    context.ellipse(position.x, position.y, xRadius, yRadius, 0, 0, Math.PI * 2);\r\n    context.fill();\r\n}\r\n\r\nexport function drawLine(context, line, style) {\r\n    if (style)\r\n        context.strokeStyle = style;\r\n    context.beginPath();\r\n    const origin = fromNormalizedDeviceCoordinates(line.origin, context.canvas);\r\n    context.moveTo(origin.x, origin.y);\r\n    const end = fromNormalizedDeviceCoordinates(line.end, context.canvas);\r\n    context.lineTo(end.x, end.y);\r\n    context.stroke();\r\n}\r\n\r\nexport function drawPolygon(context, polygon, style) {\r\n    if (style)\r\n        context.fillStyle = style;\r\n\r\n    if (!polygon.edgesAreConnected)\r\n        throw new Error('Disconnected polygon edges');\r\n\r\n    const points = polygon.edges.map(edge => fromNormalizedDeviceCoordinates(edge.origin, context.canvas));\r\n    context.beginPath();\r\n    context.moveTo(points[0].x, points[0].y);\r\n    for (const point of points.slice(1))\r\n        context.lineTo(point.x, point.y);\r\n    context.fill();\r\n}\r\n\r\nexport function fromNormalizedDeviceCoordinates(coordinates, { width, height }) {\r\n    const factor = coordinates.added(new Vector(1, 1)).scaled(0.5);\r\n    return new Vector(\r\n        width * factor.x,\r\n        height * (1 - factor.y),\r\n    );\r\n}\r\n\r\nexport function toNormalizedDeviceCoordinates(coordinates, { width, height }) {\r\n    const factor = new Vector(coordinates.x / width, 1 - coordinates.y / height);\r\n    return factor.added(new Vector(-0.5, -0.5)).scaled(2);\r\n}\r\n","<template>\r\n  <canvas\r\n    width=\"500\"\r\n    height=\"500\"\r\n    @mousemove=\"reEmit('mousemove', $event)\"\r\n    @mousedown=\"reEmit('mousedown', $event)\"\r\n    @mouseup=\"reEmit('mouseup', $event)\"\r\n    @mouseleave=\"$emit('mouseleave')\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { toNormalizedDeviceCoordinates } from '../graphics';\r\nimport Vector from '../Vector';\r\n\r\nexport default {\r\n    props: {\r\n        simulation: Object,\r\n    },\r\n    data() {\r\n        return {\r\n            running: true,\r\n        };\r\n    },\r\n    destroyed() {\r\n        this.running = false;\r\n    },\r\n    mounted() {\r\n        const frameCallback = time => {\r\n            if (!this.running)\r\n                return;\r\n\r\n            this.simulation.integrateTime(time);\r\n            this.simulation.redraw();\r\n            requestAnimationFrame(frameCallback);\r\n        };\r\n\r\n        requestAnimationFrame(frameCallback);\r\n    },\r\n    methods: {\r\n        reEmit(eventName, event) {\r\n            const { canvas } = this.simulation.drawing.context;\r\n            this.$emit(eventName, toNormalizedDeviceCoordinates(this.clickPosition(event), canvas));\r\n        },\r\n        clickPosition(event) {\r\n            const { canvas } = this.simulation.drawing.context;\r\n            const { left, top } = canvas.getBoundingClientRect();\r\n            return new Vector(event.clientX - left, event.clientY - top);\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimulationDisplay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimulationDisplay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SimulationDisplay.vue?vue&type=template&id=30c681a1&\"\nimport script from \"./SimulationDisplay.vue?vue&type=script&lang=js&\"\nexport * from \"./SimulationDisplay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"SimulationDisplay.vue\"\nexport default component.exports","<template>\r\n  <SimulationDisplay\r\n    :simulation=\"simulation\"\r\n    @mousemove=\"onMouseMove\"\r\n    @mouseup=\"onMouseUp\"\r\n    @mousedown=\"onMouseDown\"\r\n    @mouseleave=\"onMouseLeave\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport Vector from '../Vector';\r\nimport { min } from '../utils';\r\nimport SimulationDisplay from './SimulationDisplay';\r\n\r\nconst minSelectionDistance = 8e-2;\r\n\r\nconst minSelectionDistanceSquared = minSelectionDistance * minSelectionDistance;\r\n\r\nconst particleThrowMultiplier = 5e-2;\r\n\r\nexport default {\r\n    components: { SimulationDisplay },\r\n    props: {\r\n        simulation: Object,\r\n    },\r\n    data() {\r\n        return {\r\n            selection: {\r\n                particle: undefined,\r\n                wasFixed: undefined,\r\n            },\r\n            previousPosition: undefined,\r\n        };\r\n    },\r\n    methods: {\r\n        onMouseMove(mousePosition) {\r\n            if (this.selection.particle === undefined)\r\n                return;\r\n\r\n            this.previousPosition = this.selection.particle.position;\r\n            this.selection.particle.velocity = Vector.zero;\r\n            this.selection.particle.position = mousePosition;\r\n        },\r\n        onMouseUp(mousePosition) {\r\n            if (this.selection.particle === undefined)\r\n                return;\r\n\r\n            if (!this.selection.wasFixed) {\r\n                this.selection.particle.fixed = false;\r\n                this.throwSelectedParticle(mousePosition);\r\n            }\r\n\r\n            this.selection.particle = undefined;\r\n        },\r\n        onMouseDown(mousePosition) {\r\n            this.selection.particle = this.newlySelectedParticle(mousePosition);\r\n\r\n            if (this.selection.particle === undefined)\r\n                return;\r\n\r\n            this.selection.particle.position = mousePosition;\r\n            this.selection.wasFixed = this.selection.particle.fixed;\r\n            this.selection.particle.fixed = true;\r\n        },\r\n        onMouseLeave() {\r\n            if (this.selection.particle === undefined)\r\n                return;\r\n            if (!this.selection.wasFixed)\r\n                this.selection.particle.fixed = false;\r\n            this.selection.particle = undefined;\r\n        },\r\n        throwSelectedParticle() {\r\n            if (this.previousPosition === undefined)\r\n                return;\r\n\r\n            const delta = this.selection.particle.position.subtracted(this.previousPosition);\r\n            this.selection.particle.velocity = delta.scaled(particleThrowMultiplier);\r\n        },\r\n        newlySelectedParticle(mousePosition) {\r\n            return min(this.simulation.engine.particles,\r\n                particle => {\r\n                    const selectionDistance = particle.position.distanceSquared(mousePosition);\r\n                    if (selectionDistance > minSelectionDistanceSquared)\r\n                        return undefined;\r\n                    return selectionDistance;\r\n                },\r\n            );\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractiveSimulationDisplay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractiveSimulationDisplay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InteractiveSimulationDisplay.vue?vue&type=template&id=683de774&\"\nimport script from \"./InteractiveSimulationDisplay.vue?vue&type=script&lang=js&\"\nexport * from \"./InteractiveSimulationDisplay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"InteractiveSimulationDisplay.vue\"\nexport default component.exports","import NotImplemented from '../NotImplemented';\r\n\r\n// Trying to integrate more than maxTimeDelta milliseconds at a time\r\n// simply drops the integration and does nothing. Serves to fix lag.\r\nconst maxTimeDelta = 3000;\r\n\r\nexport default class Engine {\r\n    static get timestep() {\r\n        return 6;\r\n    }\r\n\r\n    constructor() {\r\n        this.timeAccumulator = 0;\r\n        this.lastIntegrationTime = undefined;\r\n    }\r\n\r\n    integrateTime(currentTime) {\r\n        if (this.lastIntegrationTime === undefined) {\r\n            this.lastIntegrationTime = currentTime;\r\n            return;\r\n        }\r\n\r\n        const timeDelta = currentTime - this.lastIntegrationTime;\r\n        if (timeDelta > maxTimeDelta)\r\n            return;\r\n        this.timeAccumulator += timeDelta;\r\n        this.lastIntegrationTime = currentTime;\r\n        while (this.timeAccumulator >= Engine.timestep) {\r\n            this.timeAccumulator -= Engine.timestep;\r\n            this.integrateStep();\r\n        }\r\n    }\r\n\r\n    integrateStep() {\r\n        throw new NotImplemented();\r\n    }\r\n}\r\n","import Engine from '../Engine';\r\nimport Vector from '../../Vector';\r\n\r\n// XXX\r\n// Something I'd like to add in the future is for particles\r\n// to also have a coeffcient of restitution and take that into account\r\n// when resolving contacts.\r\n//\r\n// For terrain contacts, adding the restitutions or calculating\r\n// an average value between the particle restitution and the\r\n// terrain restitution might work fine.\r\n//\r\n// For particle contacts, it's not as simple.\r\n// See https://en.wikipedia.org/wiki/Inelastic_collision#Formula\r\n// and also Kodicek D., Flynt J. P., Mathematics and Physics for Programmers,\r\n// chapter on collision resolution might be interesting.\r\n\r\nconst baseRadius = 1.2e-2;\r\n\r\nexport default class Particle {\r\n    constructor({ position, mass = 1, gravityScale = 1, fixedRadius = undefined, fixed = false }) {\r\n        this.position = position;\r\n        this.gravityScale = gravityScale;\r\n        this.force = Vector.zero;\r\n        this.velocity = Vector.zero;\r\n        this.mass = mass;\r\n        this.fixedRadius = fixedRadius;\r\n        this.fixed = fixed;\r\n    }\r\n\r\n    applyGravity(gravity) {\r\n        this.force.add(new Vector(0, -gravity * this.mass).scaled(this.gravityScale));\r\n    }\r\n\r\n    update(gravity, damping) {\r\n        if (this.fixed) {\r\n            this.velocity = Vector.zero;\r\n            return;\r\n        }\r\n\r\n        this.applyGravity(gravity);\r\n        this.updateVelocity();\r\n        this.applyDamping(damping);\r\n        this.updatePosition();\r\n    }\r\n\r\n    // XXX Test this\r\n    overlaps(other) {\r\n        const radiiSum = this.radius + other.radius;\r\n        return radiiSum * radiiSum >= this.position.distanceSquared(other.position);\r\n    }\r\n\r\n    get radius() {\r\n        if (this.fixedRadius !== undefined)\r\n            return this.fixedRadius;\r\n        return baseRadius * Math.sqrt(this.mass);\r\n    }\r\n\r\n    get speed() {\r\n        return this.velocity.magnitude;\r\n    }\r\n\r\n    get speedSquared() {\r\n        return this.velocity.magnitudeSquared;\r\n    }\r\n\r\n    applyDamping(damping) {\r\n        this.velocity.scale(Math.pow(1 - damping, Engine.timestep));\r\n    }\r\n\r\n    updateVelocity() {\r\n        this.velocity.add(this.acceleration.scaled(Engine.timestep));\r\n    }\r\n\r\n    updatePosition() {\r\n        this.position.add(this.velocity.scaled(Engine.timestep));\r\n    }\r\n\r\n    get acceleration() {\r\n        return this.force.scaled(1 / this.mass);\r\n    }\r\n}\r\n","import NotImplemented from '../../NotImplemented';\r\n\r\nexport default class Contact {\r\n    solve() {\r\n        throw new NotImplemented();\r\n    }\r\n}\r\n","import Contact from './Contact';\r\n\r\nexport default class ParticleContact extends Contact {\r\n    constructor(particles) {\r\n        super();\r\n        this.particles = particles;\r\n    }\r\n\r\n    solve() {\r\n        this.solveInterpenetration();\r\n        this.solveBounce();\r\n    }\r\n\r\n    solveInterpenetration() {\r\n        const delta = this.normal.scaled(this.interpenetration / 2);\r\n        this.particles[0].position.subtract(delta);\r\n        this.particles[1].position.add(delta);\r\n    }\r\n\r\n    solveBounce() {\r\n        this.particles[0].velocity = this.normal.scaled(-this.particles[1].mass * this.netSpeed / this.netMass);\r\n        this.particles[1].velocity = this.normal.scaled(this.particles[0].mass * this.netSpeed / this.netMass);\r\n    }\r\n\r\n    get interpenetration() {\r\n        const distance = this.particles[0].position.distance(this.particles[1].position);\r\n        return this.particles[0].radius + this.particles[1].radius - distance;\r\n    }\r\n\r\n    get normal() {\r\n        return this.particles[0].position.direction(this.particles[1].position);\r\n    }\r\n\r\n    get netMass() {\r\n        return this.particles[0].mass + this.particles[1].mass;\r\n    }\r\n\r\n    get netSpeed() {\r\n        return this.particles[0].speed + this.particles[1].speed;\r\n    }\r\n}\r\n","import Contact from './Contact';\r\n\r\nconst minimumBounceSpeed = 1.3e-4;\r\n\r\nconst minimumBounceSpeedSquared = minimumBounceSpeed * minimumBounceSpeed;\r\n\r\nexport default class TerrainContact extends Contact {\r\n    constructor({ particle, terrainElement }) {\r\n        super();\r\n        this.particle = particle;\r\n        this.terrainElement = terrainElement;\r\n    }\r\n\r\n    solve() {\r\n        const edge = this.edge();\r\n        const normal = this.normal(edge);\r\n        const penetrationDepth = this.penetrationDepth(edge);\r\n\r\n        this.removePenetration(normal, penetrationDepth);\r\n        if (this.bounceParticle(normal))\r\n            return;\r\n        this.slideParticle(edge);\r\n        this.applyFriction();\r\n    }\r\n\r\n    removePenetration(normal, penetrationDepth) {\r\n        this.particle.position.add(normal.scaled(penetrationDepth));\r\n    }\r\n\r\n    slideParticle(edge) {\r\n        const direction = edge.offset.flippedTowards(this.particle.velocity);\r\n        this.particle.velocity = this.particle.velocity.projected(direction);\r\n    }\r\n\r\n    applyFriction() {\r\n        this.particle.velocity.scale(1 - this.terrainElement.friction);\r\n    }\r\n\r\n    bounceParticle(normal) {\r\n        if (this.particle.speedSquared < minimumBounceSpeedSquared)\r\n            return false;\r\n        const normalVelocity = this.particle.velocity.projected(normal);\r\n        this.particle.velocity.subtract(normalVelocity);\r\n        this.particle.velocity.add(normalVelocity.scaled(-this.terrainElement.restitution));\r\n        return true;\r\n    }\r\n\r\n    edge() {\r\n        return this.terrainElement.polygon.closestEdge(this.particle.position);\r\n    }\r\n\r\n    normal(edge) {\r\n        return edge.normal(this.particle.velocity.negated);\r\n    }\r\n\r\n    penetrationDepth(edge) {\r\n        return edge.distance(this.particle.position);\r\n    }\r\n}\r\n","import Engine from '../Engine';\r\nimport ParticleContact from './ParticleContact';\r\nimport TerrainContact from './TerrainContact';\r\n\r\nconst positionBound = 10;\r\n\r\nfunction positionWithinBounds({ x, y }) {\r\n    return (x >= -positionBound && x <= positionBound &&\r\n            y >= -positionBound && y <= positionBound);\r\n}\r\n\r\nexport default class MassAggregateEngine extends Engine {\r\n    constructor({\r\n        timestep = MassAggregateEngine.defaultTimestep,\r\n        gravity = 1e-6, damping = 7e-4,\r\n        particles = [], springs = [], terrain = []\r\n    } = {}) {\r\n        super(timestep);\r\n        this.gravity = gravity;\r\n        this.particles = particles;\r\n        this.springs = springs;\r\n        this.terrain = terrain;\r\n        this.damping = damping;\r\n    }\r\n\r\n    clearUselessParticles() {\r\n        this.particles = this.particles.filter(\r\n            particle => positionWithinBounds(particle.position));\r\n    }\r\n\r\n    integrateStep() {\r\n        this.resetForces();\r\n        this.updateSprings();\r\n        this.solveContacts();\r\n        this.updateParticles();\r\n        this.clearUselessParticles();\r\n\r\n        // clearUselessParticles doesn't strictly need to be called whenever we\r\n        // integrate, but I decided to call it here for simplicity.\r\n    }\r\n\r\n    solveContacts() {\r\n        const contacts = this.findContacts();\r\n        const x = 0;\r\n        for (const contact of this.findContacts())\r\n            contact.solve();\r\n    }\r\n\r\n    findContacts() {\r\n        return [\r\n            ...this.findParticleContacts(),\r\n            ...this.findTerrainContacts(),\r\n        ];\r\n    }\r\n\r\n    * findParticleContacts() {\r\n        for (let i = 0; i < this.particles.length - 1; ++i) {\r\n            const particle = this.particles[i];\r\n            for (const otherParticle of this.particles.slice(i + 1)) {\r\n                if (otherParticle.overlaps(particle))\r\n                    yield new ParticleContact([particle, otherParticle]);\r\n            }\r\n        }\r\n    }\r\n\r\n    * findTerrainContacts() {\r\n        for (const particle of this.particles) {\r\n            for (const terrainElement of this.terrain) {\r\n                if (terrainElement.polygon.containsPoint(particle.position))\r\n                    yield new TerrainContact({ particle, terrainElement });\r\n            }\r\n        }\r\n    }\r\n\r\n    resetForces() {\r\n        for (const particle of this.particles)\r\n            particle.force.reset();\r\n    }\r\n\r\n    updateSprings() {\r\n        for (const spring of this.springs)\r\n            spring.update(this.timestep);\r\n    }\r\n\r\n    updateParticles() {\r\n        for (const particle of this.particles)\r\n            particle.update(this.gravity, this.damping);\r\n    }\r\n}\r\n","import { epsilon, almostEquals, valueIsBetween, sameSigns } from './utils';\r\nimport Vector from './Vector';\r\n\r\nexport default class Line {\r\n    constructor({ origin, offset, end }) {\r\n        if (offset !== undefined && end !== undefined)\r\n            throw new TypeError('Either offset or end may be specified, but not both');\r\n\r\n        this.origin = origin.cloned;\r\n\r\n        if (end !== undefined)\r\n            this.end = end;\r\n        else if (offset !== undefined)\r\n            this.offset = offset;\r\n        else\r\n            throw new TypeError('Either offset or end must be specified');\r\n    }\r\n\r\n    almostEquals(other) {\r\n        return this.origin.almostEquals(other.origin) && this.offset.almostEquals(other.offset);\r\n    }\r\n\r\n    normal(positiveDirection) {\r\n        return this.offset.normal(positiveDirection);\r\n    }\r\n\r\n    // Treats self as if it were a ray directed from origin into end\r\n    rayIntersects(other) {\r\n        const { t, u } = this.intersectionParameters(other);\r\n\r\n        if (t === undefined || u === undefined)\r\n            return false;\r\n\r\n        return -epsilon < t && -epsilon < u && u < 1 + epsilon;\r\n    }\r\n\r\n    intersects(other) {\r\n        const { t, u } = this.intersectionParameters(other);\r\n\r\n        if (t === undefined || u === undefined)\r\n            return false;\r\n\r\n        return -epsilon < t && t < 1 + epsilon && -epsilon < u && u < 1 + epsilon;\r\n    }\r\n\r\n    intersection(other) {\r\n        const { t, u } = this.intersectionParameters(other);\r\n\r\n        if (t === undefined || u === undefined)\r\n            return undefined;\r\n\r\n        if (t > 1 + epsilon || t < -epsilon || u > 1 + epsilon || u < -epsilon)\r\n            return undefined;\r\n\r\n        return this.offset.scaled(t).added(this.origin);\r\n    }\r\n\r\n    // XXX Document this, stackoverflow link or have a local copy\r\n    intersectionParameters(other) {\r\n        const a = other.origin.subtracted(this.origin);\r\n        const div = this.offset.cross(other.offset);\r\n\r\n        if (almostEquals(div, 0))\r\n            return {};\r\n\r\n        return {\r\n            t: a.cross(other.offset) / div,\r\n            u: a.negated.cross(this.offset) / (-div),\r\n        };\r\n    }\r\n\r\n    containsPoint(p) {\r\n        return almostEquals(p.subtracted(this.origin).cross(this.offset), 0) &&\r\n               valueIsBetween({ value: p.x, limits: [this.origin.x, this.end.x] }) &&\r\n               valueIsBetween({ value: p.y, limits: [this.origin.y, this.end.y] });\r\n    }\r\n\r\n    closestPoint(point) {\r\n        const c = point.subtracted(this.origin).dot(this.offset);\r\n        const d = point.subtracted(this.end).dot(this.offset.negated);\r\n\r\n        if (!sameSigns(c, d)) {\r\n            if (this.origin.distanceSquared(point) < this.end.distanceSquared(point))\r\n                return this.origin;\r\n            return this.end;\r\n        }\r\n\r\n        // Call the closest point a.\r\n        // Two conditions hold:\r\n        // 1) the vector from p to a must be perpendicular to the line's offset,\r\n        //    therefore their dot product must be zero and\r\n        // 2) a must be on the line, therefore the cross product between\r\n        //    a and the line's offset must be 0.\r\n        // Get a by solving the two equations.\r\n\r\n        if (this.offset.x === 0)\r\n            return new Vector(this.origin.x, point.y);\r\n\r\n        if (this.offset.y === 0)\r\n            return new Vector(point.x, this.origin.y);\r\n\r\n        const t = this.offset.dot(point);\r\n        const y = (t * this.offset.y + this.offset.x * this.offset.cross(this.origin)) / this.offset.magnitudeSquared;\r\n        return new Vector((t - y * this.offset.y) / this.offset.x, y);\r\n    }\r\n\r\n    distance(point) {\r\n        return Math.sqrt(this.distanceSquared(point));\r\n    }\r\n\r\n    distanceSquared(point) {\r\n        return this.closestPoint(point).distanceSquared(point);\r\n    }\r\n\r\n    get opposite() {\r\n        return new Line({ origin: this.origin, offset: this.offset.negated });\r\n    }\r\n\r\n    get end() {\r\n        return this.origin.added(this.offset);\r\n    }\r\n\r\n    set end(value) {\r\n        this.offset = value.subtracted(this.origin);\r\n    }\r\n\r\n    get length() {\r\n        return Math.sqrt(this.lengthSquared);\r\n    }\r\n\r\n    get lengthSquared() {\r\n        return this.offset.x * this.offset.x + this.offset.y * this.offset.y;\r\n    }\r\n}\r\n","import { clearContext, drawCircle, drawLine, drawPolygon } from '../../graphics';\r\nimport Line from '../../Line';\r\n\r\nconst visualForceScale = 100000;\r\n\r\nconst backgroundStyle = 'white';\r\n\r\nconst particleColor = {\r\n    hue: 225,\r\n    saturation: 70,\r\n    lightness: 40,\r\n};\r\n\r\nconst maxColorHue = 360;\r\n\r\nconst springStyle = 'grey';\r\n\r\nconst terrainStyle = 'rgb(155, 200, 200)';\r\n\r\nconst forceStyle = 'pink';\r\n\r\n// XXX Have a base class for drawing\r\n\r\nexport default class MassAggregateDrawing {\r\n    constructor({\r\n        context,\r\n        drawingForces = false,\r\n        drawingTerrain = true,\r\n        drawingSprings = true,\r\n        drawingParticles = true\r\n    } = {}) {\r\n        this.context = context;\r\n        this.drawingForces = drawingForces;\r\n        this.drawingTerrain = drawingTerrain;\r\n        this.drawingSprings = drawingSprings;\r\n        this.drawingParticles = drawingParticles;\r\n    }\r\n\r\n    redraw(engine) {\r\n        if (!this.context)\r\n            return;\r\n\r\n        this.clear();\r\n        this.drawTerrain(engine.terrain);\r\n        this.drawParticles(engine.particles);\r\n        this.drawSprings(engine.springs);\r\n        this.drawForces(engine.particles);\r\n    }\r\n\r\n    clear() {\r\n        clearContext(this.context, backgroundStyle);\r\n    }\r\n\r\n    drawTerrain(terrain) {\r\n        if (!this.drawingTerrain)\r\n            return;\r\n\r\n        for (const { polygon } of terrain)\r\n            drawPolygon(this.context, polygon, terrainStyle);\r\n    }\r\n\r\n    drawForces(particles) {\r\n        if (!this.drawingForces)\r\n            return;\r\n\r\n        for (const particle of particles) {\r\n            drawLine(\r\n                this.context,\r\n                new Line(particle.position, particle.force.scaled(visualForceScale)),\r\n                forceStyle,\r\n            );\r\n        }\r\n    }\r\n\r\n    drawParticles(particles) {\r\n        if (!this.drawingParticles || particles.length === 0)\r\n            return;\r\n\r\n        let currentHue = particleColor.hue;\r\n        const hueStep = Math.min(\r\n            (maxColorHue - particleColor.hue) / particles.length,\r\n            20,\r\n        );\r\n\r\n        for (const particle of particles) {\r\n            const style = `hsl(${currentHue}, ${particleColor.saturation}%, ${particleColor.lightness}%)`;\r\n            drawCircle(this.context, { position: particle.position, radius: particle.radius }, style);\r\n            currentHue -= hueStep;\r\n        }\r\n    }\r\n\r\n    drawSprings(springs) {\r\n        if (!this.drawingSprings)\r\n            return;\r\n\r\n        for (const spring of springs)\r\n            drawLine(this.context, spring.line, springStyle);\r\n    }\r\n}\r\n","<template>\r\n  <table>\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          <InteractiveSimulationDisplay :simulation=\"simulation\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <RestartButton @click=\"restartEngine\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <GravitySlider :engine=\"simulation.engine\" />\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\nimport Demo from '../Demo';\r\nimport GravitySlider from '../GravitySlider';\r\nimport RestartButton from '../RestartButton';\r\nimport InteractiveSimulationDisplay from '../InteractiveSimulationDisplay';\r\nimport Particle from '../../engine/mass-aggregate/Particle';\r\nimport MassAggregateEngine from '../../engine/mass-aggregate/MassAggregateEngine';\r\nimport MassAggregateDrawing from '../../engine/mass-aggregate/MassAggregateDrawing';\r\nimport Vector from '../../Vector';\r\n\r\nexport default {\r\n    components: {\r\n        InteractiveSimulationDisplay,\r\n        RestartButton,\r\n        GravitySlider,\r\n    },\r\n    mixins: [Demo],\r\n    methods: {\r\n        createEngine(previousEngine) {\r\n            return new MassAggregateEngine({\r\n                gravity: previousEngine.gravity,\r\n                damping: 0,\r\n                particles: [\r\n                    new Particle({\r\n                        position: new Vector(0, 0),\r\n                    }),\r\n                ],\r\n            });\r\n        },\r\n        createDrawing() {\r\n            return new MassAggregateDrawing();\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParticleDemo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParticleDemo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ParticleDemo.vue?vue&type=template&id=f204f8a6&\"\nimport script from \"./ParticleDemo.vue?vue&type=script&lang=js&\"\nexport * from \"./ParticleDemo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ParticleDemo.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tr',[_c('td',[_c('InteractiveSimulationDisplay',{attrs:{\"simulation\":_vm.simulation}})],1)]),_c('tr',[_c('td',[_c('RestartButton',{on:{\"click\":_vm.restartEngine}})],1)]),_c('tr',[_c('td',[_c('StiffnessSlider',{model:{value:(_vm.stiffness),callback:function ($$v) {_vm.stiffness=$$v},expression:\"stiffness\"}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{attrs:{\"for\":\"stiffness-slider\"}},[_vm._v(\"\\n    Stiffness\\n  \")]),_c('input',{attrs:{\"id\":\"stiffness-slider\",\"type\":\"range\",\"min\":\"1e-6\",\"max\":\"1e-4\",\"step\":\"1e-9\"},domProps:{\"value\":_vm.value},on:{\"input\":function($event){_vm.$emit('input', Number($event.target.value))}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <label for=\"stiffness-slider\">\r\n      Stiffness\r\n    </label>\r\n    <input\r\n      id=\"stiffness-slider\"\r\n      :value=\"value\"\r\n      type=\"range\"\r\n      min=\"1e-6\"\r\n      max=\"1e-4\"\r\n      step=\"1e-9\"\r\n      @input=\"$emit('input', Number($event.target.value))\"\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        value: Number,\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StiffnessSlider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StiffnessSlider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StiffnessSlider.vue?vue&type=template&id=ebf97798&\"\nimport script from \"./StiffnessSlider.vue?vue&type=script&lang=js&\"\nexport * from \"./StiffnessSlider.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"StiffnessSlider.vue\"\nexport default component.exports","import Line from '../../Line';\r\nimport NotImplemented from '../../NotImplemented';\r\n\r\nexport default class Spring {\r\n    constructor(particles) {\r\n        this.particles = particles;\r\n        this.restingLength = this.currentLength;\r\n    }\r\n\r\n    update() {\r\n        this.contract(this.particles[0], this.particles[1]);\r\n        this.contract(this.particles[1], this.particles[0]);\r\n    }\r\n\r\n    contract(fromParticle, toParticle) {\r\n        throw new NotImplemented();\r\n    }\r\n\r\n    get line() {\r\n        return new Line({\r\n            origin: this.particles[0].position,\r\n            end: this.particles[1].position,\r\n        });\r\n    }\r\n\r\n    get currentLength() {\r\n        return this.particles[0].position.distance(this.particles[1].position);\r\n    }\r\n\r\n    get lengthDelta() {\r\n        return this.currentLength - this.restingLength;\r\n    }\r\n}\r\n","import Spring from './Spring';\r\n\r\nexport default class ElasticSpring extends Spring {\r\n    constructor({ particles, stiffness }) {\r\n        super(particles);\r\n        this.stiffness = stiffness;\r\n    }\r\n\r\n    update() {\r\n        this.contract(this.particles[0], this.particles[1]);\r\n        this.contract(this.particles[1], this.particles[0]);\r\n    }\r\n\r\n    contract(fromParticle, toParticle) {\r\n        const direction = fromParticle.position.direction(toParticle.position);\r\n        fromParticle.force.add(direction.scaled(this.contractionMagnitude));\r\n    }\r\n\r\n    get contractionMagnitude() {\r\n        return this.stiffness * this.lengthDelta;\r\n    }\r\n}\r\n","<template>\r\n  <table>\r\n    <tr>\r\n      <td>\r\n        <InteractiveSimulationDisplay :simulation=\"simulation\" />\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>\r\n        <RestartButton @click=\"restartEngine\" />\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>\r\n        <StiffnessSlider v-model=\"stiffness\" />\r\n      </td>\r\n    </tr>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Demo from '../Demo';\r\nimport InteractiveSimulationDisplay from '../InteractiveSimulationDisplay';\r\nimport RestartButton from '../RestartButton';\r\nimport StiffnessSlider from '../StiffnessSlider';\r\nimport MassAggregateEngine from '../../engine/mass-aggregate/MassAggregateEngine';\r\nimport MassAggregateDrawing from '../../engine/mass-aggregate/MassAggregateDrawing';\r\nimport ElasticSpring from '../../engine/mass-aggregate/ElasticSpring';\r\nimport Particle from '../../engine/mass-aggregate/Particle';\r\nimport Vector from '../../Vector';\r\n\r\nexport default {\r\n    components: {\r\n        InteractiveSimulationDisplay,\r\n        RestartButton,\r\n        StiffnessSlider,\r\n    },\r\n    mixins: [Demo],\r\n    data() {\r\n        return {\r\n            stiffness: 1e-5,\r\n        };\r\n    },\r\n    watch: {\r\n        stiffness(newStiffness) {\r\n            this.simulation.engine.springs[0].stiffness = newStiffness;\r\n        },\r\n    },\r\n    methods: {\r\n        createEngine(previousEngine) {\r\n            const particles = [\r\n                new Particle({\r\n                    position: Vector.zero,\r\n                    mass: 1,\r\n                    fixed: true,\r\n                }),\r\n                new Particle({\r\n                    position: new Vector(-0.2, 0.2),\r\n                    gravityScale: 2.5,\r\n                    mass: 1,\r\n                }),\r\n            ];\r\n            return new MassAggregateEngine({\r\n                gravity: previousEngine.gravity,\r\n                damping: previousEngine.damping,\r\n                particles,\r\n                springs: [\r\n                    new ElasticSpring({ particles, stiffness: this.stiffness }),\r\n                ],\r\n            });\r\n        },\r\n        createDrawing() {\r\n            return new MassAggregateDrawing();\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpringDemo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpringDemo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpringDemo.vue?vue&type=template&id=12d6fe20&\"\nimport script from \"./SpringDemo.vue?vue&type=script&lang=js&\"\nexport * from \"./SpringDemo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"SpringDemo.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tbody',[_c('tr',[_c('td',[_c('InteractiveSimulationDisplay',{attrs:{\"simulation\":_vm.simulation}})],1)]),_c('tr',[_c('td',[_c('RestartButton',{on:{\"click\":_vm.restartEngine}})],1)]),_c('tr',[_c('td',[_c('RestitutionSlider',{attrs:{\"terrainElement\":_vm.platform}})],1)]),_c('tr',[_c('td',[_c('AngleSlider',{model:{value:(_vm.platformAngle),callback:function ($$v) {_vm.platformAngle=$$v},expression:\"platformAngle\"}})],1)]),_c('tr',[_c('td',[_c('LengthSlider',{model:{value:(_vm.platformLength),callback:function ($$v) {_vm.platformLength=$$v},expression:\"platformLength\"}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{attrs:{\"for\":\"restitution-slider\"}},[_vm._v(\"\\n    Restitution\\n  \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.terrainElement.restitution),expression:\"terrainElement.restitution\",modifiers:{\"number\":true}}],attrs:{\"id\":\"restitution-slider\",\"type\":\"range\",\"min\":\"0\",\"max\":\"0.9\",\"step\":\"1e-9\"},domProps:{\"value\":(_vm.terrainElement.restitution)},on:{\"__r\":function($event){_vm.$set(_vm.terrainElement, \"restitution\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <label for=\"restitution-slider\">\r\n      Restitution\r\n    </label>\r\n    <input\r\n      id=\"restitution-slider\"\r\n      v-model.number=\"terrainElement.restitution\"\r\n      type=\"range\"\r\n      min=\"0\"\r\n      max=\"0.9\"\r\n      step=\"1e-9\"\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        terrainElement: Object,\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestitutionSlider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestitutionSlider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestitutionSlider.vue?vue&type=template&id=b516d652&\"\nimport script from \"./RestitutionSlider.vue?vue&type=script&lang=js&\"\nexport * from \"./RestitutionSlider.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"RestitutionSlider.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{attrs:{\"for\":\"angle-slider\"}},[_vm._v(\"\\n    Angle\\n  \")]),_c('input',{attrs:{\"id\":\"angle-slider\",\"type\":\"range\",\"min\":\"-1.57\",\"max\":\"1.57\",\"step\":\"1e-9\"},domProps:{\"value\":_vm.value},on:{\"input\":function($event){_vm.$emit('input', Number($event.target.value))}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <label for=\"angle-slider\">\r\n      Angle\r\n    </label>\r\n    <input\r\n      id=\"angle-slider\"\r\n      type=\"range\"\r\n      min=\"-1.57\"\r\n      max=\"1.57\"\r\n      step=\"1e-9\"\r\n      :value=\"value\"\r\n      @input=\"$emit('input', Number($event.target.value))\"\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        value: Number,\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AngleSlider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AngleSlider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AngleSlider.vue?vue&type=template&id=d568e0de&\"\nimport script from \"./AngleSlider.vue?vue&type=script&lang=js&\"\nexport * from \"./AngleSlider.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"AngleSlider.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{attrs:{\"for\":\"length-slider\"}},[_vm._v(\"\\n    Length\\n  \")]),_c('input',{attrs:{\"id\":\"length-slider\",\"type\":\"range\",\"min\":\"0.2\",\"max\":\"4\",\"step\":\"1e-9\"},domProps:{\"value\":_vm.value},on:{\"input\":function($event){_vm.$emit('input', Number($event.target.value))}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <label for=\"length-slider\">\r\n      Length\r\n    </label>\r\n    <input\r\n      id=\"length-slider\"\r\n      type=\"range\"\r\n      :value=\"value\"\r\n      min=\"0.2\"\r\n      max=\"4\"\r\n      step=\"1e-9\"\r\n      @input=\"$emit('input', Number($event.target.value))\"\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        value: Number,\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LengthSlider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LengthSlider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LengthSlider.vue?vue&type=template&id=20570698&\"\nimport script from \"./LengthSlider.vue?vue&type=script&lang=js&\"\nexport * from \"./LengthSlider.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"LengthSlider.vue\"\nexport default component.exports","import { min } from './utils';\r\nimport Line from './Line';\r\nimport Vector from './Vector';\r\n\r\nfunction * vertices(edges) {\r\n\r\n}\r\n\r\nexport default class Polygon {\r\n    static fromVertices(vertices) {\r\n        if (vertices.length < 3)\r\n            throw new Error('Polygon must have at least three vertices');\r\n        return Polygon.fromEdges(Array.from(findEdges()));\r\n\r\n        function * findEdges() {\r\n            for (let i = 0; i < vertices.length - 1; ++i)\r\n                yield new Line({ origin: vertices[i].cloned, end: vertices[i + 1].cloned });\r\n            yield new Line({ origin: vertices[vertices.length - 1].cloned, end: vertices[0].cloned });\r\n        }\r\n    }\r\n\r\n    static fromEdges(edges) {\r\n        if (edges.length < 3)\r\n            throw new Error('Polygon must have at least three edges');\r\n        return new Polygon(edges);\r\n    }\r\n\r\n    constructor(edges) {\r\n        this.edges = edges;\r\n    }\r\n\r\n    get vertices() {\r\n        return this.edges.map(edge => edge.origin);\r\n    }\r\n\r\n    get edgesAreConnected() {\r\n        for (let i = 1; i < this.edges.length; ++i) {\r\n            if (!this.edges[i].origin.almostEquals(this.edges[i - 1].end))\r\n                return false;\r\n        }\r\n\r\n        if (!this.edges[0].origin.almostEquals(this.edges[this.edges.length - 1].end))\r\n            return false;\r\n\r\n        return true;\r\n    }\r\n\r\n    containsPoint(point) {\r\n        if (this.isVertex(point))\r\n            return true;\r\n\r\n        const ray = new Line({ origin: point, offset: new Vector(1, 0) });\r\n        return this.countIntersections(ray) % 2 === 1;\r\n    }\r\n\r\n    isVertex(point) {\r\n        return this.vertices.some(vertex => vertex.almostEquals(point));\r\n    }\r\n\r\n    countIntersections(ray) {\r\n        return this.edges.reduce((acc, edge) => {\r\n            if (ray.rayIntersects(edge))\r\n                return acc + 1;\r\n            return acc;\r\n        }, 0);\r\n    }\r\n\r\n    closestEdge(point) {\r\n        return min(this.edges, edge => edge.distance(point));\r\n    }\r\n}\r\n","export default class TerrainElement {\r\n    constructor({ polygon, restitution = 0, friction = 0 }) {\r\n        this.polygon = polygon;\r\n        this.restitution = restitution;\r\n        this.friction = friction;\r\n    }\r\n}\r\n","<template>\r\n  <table>\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          <InteractiveSimulationDisplay :simulation=\"simulation\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <RestartButton @click=\"restartEngine\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <RestitutionSlider :terrainElement=\"platform\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <AngleSlider v-model=\"platformAngle\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <LengthSlider v-model=\"platformLength\" />\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\nimport Demo from '../Demo';\r\nimport InteractiveSimulationDisplay from '../InteractiveSimulationDisplay';\r\nimport RestartButton from '../RestartButton';\r\nimport RestitutionSlider from '../RestitutionSlider';\r\nimport AngleSlider from '../AngleSlider';\r\nimport LengthSlider from '../LengthSlider';\r\nimport Polygon from '../../Polygon';\r\nimport Vector from '../../Vector';\r\nimport Particle from '../../engine/mass-aggregate/Particle';\r\nimport MassAggregateEngine from '../../engine/mass-aggregate/MassAggregateEngine';\r\nimport MassAggregateDrawing from '../../engine/mass-aggregate/MassAggregateDrawing';\r\nimport TerrainElement from '../../engine/mass-aggregate/TerrainElement';\r\n\r\n// XXX Add a friction slider here and see if you can figure out a decent default value\r\n\r\nfunction startingPosition() {\r\n    return new Vector(0, 0.9);\r\n}\r\n\r\nexport default {\r\n    components: { InteractiveSimulationDisplay, RestartButton, RestitutionSlider, AngleSlider, LengthSlider },\r\n    mixins: [Demo],\r\n    data() {\r\n        const platformRestitution = 0.45;\r\n\r\n        return {\r\n            particle: new Particle({ position: startingPosition, mass: 1 }),\r\n            platform: new TerrainElement({\r\n                polygon: Polygon.fromVertices([\r\n                    new Vector(-0.5, 0), new Vector(0.5, 0),\r\n                    new Vector(0.5, -2), new Vector(-0.5, -2),\r\n                ]),\r\n                restitution: platformRestitution,\r\n                friction: 1e-2,\r\n            }),\r\n            platformAngle: 0,\r\n            platformLength: 1,\r\n            platformRestitution,\r\n        };\r\n    },\r\n    watch: {\r\n        platformAngle() {\r\n            this.updatePlatformLayout();\r\n        },\r\n        platformLength() {\r\n            this.updatePlatformLayout();\r\n        },\r\n        platformRestitution() {\r\n            for (const terrainElement of this.simulation.engine.terrain)\r\n                terrainElement.restitution = this.platformRestitution;\r\n        },\r\n    },\r\n    methods: {\r\n        createEngine(previousEngine) {\r\n            this.particle.position = startingPosition();\r\n            this.particle.velocity = Vector.zero;\r\n\r\n            return new MassAggregateEngine({\r\n                gravity: previousEngine.gravity,\r\n                damping: previousEngine.damping,\r\n                particles: [this.particle],\r\n                terrain: [this.platform, new TerrainElement({\r\n                    restitution: this.platformRestitution,\r\n                    friction: 1e-2,\r\n                    polygon: Polygon.fromVertices([\r\n                        new Vector(0.8, 5), new Vector(4, 5),\r\n                        new Vector(4, -5), new Vector(0.8, -5),\r\n                    ]),\r\n                })],\r\n            });\r\n        },\r\n        createDrawing() {\r\n            return new MassAggregateDrawing();\r\n        },\r\n        updatePlatformLayout() {\r\n            const lengthHalf = this.platformLength / 2;\r\n            const x = lengthHalf * Math.cos(this.platformAngle);\r\n            const y = lengthHalf * Math.sin(this.platformAngle);\r\n            this.platform.polygon = Polygon.fromVertices([\r\n                new Vector(-x, -y), new Vector(x, y),\r\n                new Vector(x, -2), new Vector(-x, -2),\r\n            ]);\r\n            this.simulation.engine.terrain[0].polygon = this.platform.polygon;\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TerrainDemo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TerrainDemo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TerrainDemo.vue?vue&type=template&id=414202dc&\"\nimport script from \"./TerrainDemo.vue?vue&type=script&lang=js&\"\nexport * from \"./TerrainDemo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"TerrainDemo.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tbody',[_c('tr',[_c('td',[_c('InteractiveSimulationDisplay',{attrs:{\"simulation\":_vm.simulation}})],1)]),_c('tr',[_c('td',[_c('RestartButton',{on:{\"click\":_vm.restartEngine}})],1)]),_c('tr',[_c('td',[_c('label',[_vm._v(\"Force\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.firingForce),expression:\"firingForce\",modifiers:{\"number\":true}}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1e-3\",\"step\":\"1e-9\"},domProps:{\"value\":(_vm.firingForce)},on:{\"__r\":function($event){_vm.firingForce=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}})])]),_c('tr',[_c('td',[_c('ParticleMassSliders',{attrs:{\"particles\":_vm.particles,\"min\":1,\"max\":5}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tbody',_vm._l((_vm.particles),function(particle,index){return _c('tr',{key:index},[_c('label',{attrs:{\"for\":'mass-input' + index}},[_vm._v(\"\\n        Particle \"+_vm._s(index)+\" mass\\n      \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(particle.mass),expression:\"particle.mass\",modifiers:{\"number\":true}}],attrs:{\"id\":'mass-input' + index,\"type\":\"range\",\"min\":_vm.min,\"max\":_vm.max,\"step\":\"1e-9\"},domProps:{\"value\":(particle.mass)},on:{\"__r\":function($event){_vm.$set(particle, \"mass\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}})])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <table>\r\n    <tbody>\r\n      <tr\r\n        v-for=\"(particle, index) in particles\"\r\n        :key=\"index\"\r\n      >\r\n        <label :for=\"'mass-input' + index\">\r\n          Particle {{ index }} mass\r\n        </label>\r\n        <input\r\n          :id=\"'mass-input' + index\"\r\n          v-model.number=\"particle.mass\"\r\n          type=\"range\"\r\n          :min=\"min\"\r\n          :max=\"max\"\r\n          step=\"1e-9\"\r\n        >\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        particles: Array,\r\n        min: Number,\r\n        max: Number,\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParticleMassSliders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParticleMassSliders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ParticleMassSliders.vue?vue&type=template&id=1055ef77&\"\nimport script from \"./ParticleMassSliders.vue?vue&type=script&lang=js&\"\nexport * from \"./ParticleMassSliders.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ParticleMassSliders.vue\"\nexport default component.exports","<template>\r\n  <table>\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          <InteractiveSimulationDisplay :simulation=\"simulation\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <RestartButton @click=\"restartEngine\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <label>Force</label>\r\n          <input\r\n            v-model.number=\"firingForce\"\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"1e-3\"\r\n            step=\"1e-9\"\r\n          >\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <ParticleMassSliders\r\n            :particles=\"particles\"\r\n            :min=\"1\"\r\n            :max=\"5\"\r\n          />\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\nimport Demo from '../Demo';\r\nimport InteractiveSimulationDisplay from '../InteractiveSimulationDisplay';\r\nimport RestartButton from '../RestartButton';\r\nimport ParticleMassSliders from '../ParticleMassSliders';\r\nimport MassAggregateEngine from '../../engine/mass-aggregate/MassAggregateEngine';\r\nimport MassAggregateDrawing from '../../engine/mass-aggregate/MassAggregateDrawing';\r\nimport Particle from '../../engine/mass-aggregate/Particle';\r\nimport Vector from '../../Vector';\r\n\r\nconst leftParticlePosition = new Vector(-0.5, 0);\r\n\r\nconst rightParticlePosition = new Vector(0.5, 0);\r\n\r\nclass FiredParticle extends Particle {\r\n    constructor({ firingForce, ...params }) {\r\n        super(params);\r\n        this.firingForce = firingForce;\r\n        this.fired = false;\r\n    }\r\n\r\n    updateVelocity(timestep) {\r\n        if (!this.fired) {\r\n            this.fired = true;\r\n            this.force.add(this.firingForce);\r\n        }\r\n\r\n        super.updateVelocity(timestep);\r\n    }\r\n}\r\n\r\nexport default {\r\n    components: { InteractiveSimulationDisplay, RestartButton, ParticleMassSliders },\r\n    mixins: [Demo],\r\n    data() {\r\n        const firingForce = 1.3e-4;\r\n\r\n        return {\r\n            firingForce,\r\n            particles: [\r\n                new FiredParticle({\r\n                    position: leftParticlePosition.cloned,\r\n                    mass: 1,\r\n                    firingForce: new Vector(firingForce, 0),\r\n                }),\r\n                new FiredParticle({\r\n                    position: rightParticlePosition.cloned,\r\n                    mass: 1,\r\n                    firingForce: new Vector(-firingForce, 0),\r\n                }),\r\n            ],\r\n        };\r\n    },\r\n    methods: {\r\n        createEngine() {\r\n            this.particles[0].position = leftParticlePosition.cloned;\r\n            this.particles[0].velocity = Vector.zero;\r\n            this.particles[0].fired = false;\r\n            this.particles[0].firingForce = new Vector(this.firingForce, 0);\r\n            this.particles[1].position = rightParticlePosition.cloned;\r\n            this.particles[1].velocity = Vector.zero;\r\n            this.particles[1].fired = false;\r\n            this.particles[1].firingForce = new Vector(-this.firingForce, 0);\r\n\r\n            return new MassAggregateEngine({\r\n                gravity: 0,\r\n                particles: this.particles,\r\n            });\r\n        },\r\n        createDrawing() {\r\n            return new MassAggregateDrawing();\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParticleCollisionDemo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParticleCollisionDemo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ParticleCollisionDemo.vue?vue&type=template&id=46c8e866&\"\nimport script from \"./ParticleCollisionDemo.vue?vue&type=script&lang=js&\"\nexport * from \"./ParticleCollisionDemo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ParticleCollisionDemo.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tr',[_c('td',[_c('InteractiveSimulationDisplay',{attrs:{\"simulation\":_vm.simulation}})],1)]),_c('tr',[_c('td',[_c('RestartButton',{on:{\"click\":_vm.restartEngine}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Spring from './Spring';\r\n\r\nexport default class Rod extends Spring {\r\n    contract(fromParticle, toParticle) {\r\n        if (fromParticle.fixed)\r\n            return;\r\n        if (toParticle.fixed)\r\n            this.contractOne(fromParticle, toParticle);\r\n        else\r\n            this.contractBoth(fromParticle, toParticle);\r\n    }\r\n\r\n    contractOne(fromParticle, toParticle) {\r\n        const direction = fromParticle.position.direction(toParticle.position);\r\n        fromParticle.position.add(direction.scaled(this.lengthDelta));\r\n    }\r\n\r\n    contractBoth(fromParticle, toParticle) {\r\n        const direction = fromParticle.position.direction(toParticle.position);\r\n        const netMass = fromParticle.mass + toParticle.mass;\r\n        fromParticle.position.add(direction.scaled(this.lengthDelta * toParticle.mass / netMass));\r\n    }\r\n}\r\n","<template>\r\n  <table>\r\n    <tr>\r\n      <td>\r\n        <InteractiveSimulationDisplay :simulation=\"simulation\" />\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>\r\n        <RestartButton @click=\"restartEngine\" />\r\n      </td>\r\n    </tr>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\nimport Demo from '../Demo';\r\nimport InteractiveSimulationDisplay from '../InteractiveSimulationDisplay';\r\nimport RestartButton from '../RestartButton';\r\nimport MassAggregateEngine from '../../engine/mass-aggregate/MassAggregateEngine';\r\nimport MassAggregateDrawing from '../../engine/mass-aggregate/MassAggregateDrawing';\r\nimport Rod from '../../engine/mass-aggregate/Rod';\r\nimport Particle from '../../engine/mass-aggregate/Particle';\r\nimport TerrainElement from '../../engine/mass-aggregate/TerrainElement';\r\nimport Vector from '../../Vector';\r\nimport Polygon from '../../Polygon';\r\n\r\nexport default {\r\n    components: {\r\n        InteractiveSimulationDisplay,\r\n        RestartButton,\r\n    },\r\n    mixins: [Demo],\r\n    methods: {\r\n        createEngine() {\r\n            const particles = [\r\n                new Particle({ position: new Vector(0, 0.8) }),\r\n                new Particle({ position: new Vector(-0.35, 0.5) }),\r\n            ];\r\n            return new MassAggregateEngine({\r\n                particles,\r\n                springs: [\r\n                    new Rod(particles)\r\n                ],\r\n                terrain: [\r\n                    new TerrainElement({\r\n                        polygon: Polygon.fromVertices([\r\n                            new Vector(-5, 0), new Vector(0.7, 0),\r\n                            new Vector(0.7, 5), new Vector(5, 5),\r\n                            new Vector(5, -5), new Vector(-5, -5),\r\n                        ]),\r\n                        restitution: 0.3,\r\n                    }),\r\n                ],\r\n            });\r\n        },\r\n        createDrawing() {\r\n            return new MassAggregateDrawing();\r\n        }\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RodDemo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RodDemo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RodDemo.vue?vue&type=template&id=dde9fe72&\"\nimport script from \"./RodDemo.vue?vue&type=script&lang=js&\"\nexport * from \"./RodDemo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"RodDemo.vue\"\nexport default component.exports","<template>\r\n  <div>\r\n    <select v-model=\"currentDemo\">\r\n      <option\r\n        v-for=\"demo in demos\"\r\n        :key=\"demo.title\"\r\n        :value=\"demo.component\"\r\n      >\r\n        {{ demo.title }}\r\n      </option>\r\n    </select>\r\n\r\n    <component :is=\"currentDemo\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ParticleDemo from './mass-aggregate/ParticleDemo';\r\nimport SpringDemo from './mass-aggregate/SpringDemo';\r\nimport TerrainDemo from './mass-aggregate/TerrainDemo';\r\nimport ParticleCollisionDemo from './mass-aggregate/ParticleCollisionDemo';\r\nimport RodDemo from './mass-aggregate/RodDemo';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            demos: [\r\n                {\r\n                    title: 'Particle Demo',\r\n                    component: ParticleDemo,\r\n                },\r\n                {\r\n                    title: 'Spring Demo',\r\n                    component: SpringDemo,\r\n                },\r\n                {\r\n                    title: 'Terrain Demo',\r\n                    component: TerrainDemo,\r\n                },\r\n                {\r\n                    title: 'Particle Collision Demo',\r\n                    component: ParticleCollisionDemo,\r\n                },\r\n                {\r\n                    title: 'Rod Demo',\r\n                    component: RodDemo,\r\n                }\r\n            ],\r\n            currentDemo: undefined,\r\n        };\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DemoChoice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DemoChoice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DemoChoice.vue?vue&type=template&id=3a290d48&\"\nimport script from \"./DemoChoice.vue?vue&type=script&lang=js&\"\nexport * from \"./DemoChoice.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"DemoChoice.vue\"\nexport default component.exports","<template>\r\n  <DemoChoice />\r\n</template>\r\n\r\n<script>\r\nimport DemoChoice from './components/DemoChoice';\r\n\r\n// XXX Pass the line tests\r\n\r\nexport default {\r\n    components: { DemoChoice },\r\n};\r\n</script>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2a6adcc9&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import Vue from 'vue';\r\nimport App from './App.vue';\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n    el: '#app',\r\n    render: h => h(App),\r\n});\r\n"],"sourceRoot":""}