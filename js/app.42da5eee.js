(function(t){function e(e){for(var n,s,a=e[0],l=e[1],c=e[2],p=0,f=[];p<a.length;p++)s=a[p],r[s]&&f.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,a=1;a<i.length;a++){var l=i[a];0!==r[l]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},r={app:0},o=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"0e39":function(t,e,i){"use strict";var n=i("b28c"),r=i.n(n);r.a},"23f1":function(t,e,i){},2646:function(t,e,i){"use strict";var n=i("23f1"),r=i.n(n);r.a},"353e":function(t,e,i){"use strict";var n=i("885f"),r=i.n(n);r.a},4826:function(t,e,i){"use strict";var n=i("945d"),r=i.n(n);r.a},8208:function(t,e,i){"use strict";var n=i("c27d"),r=i.n(n);r.a},"885f":function(t,e,i){},"945d":function(t,e,i){},"957a":function(t,e,i){"use strict";var n=i("a7c2"),r=i.n(n);r.a},a7c2:function(t,e,i){},aa13:function(t,e,i){"use strict";var n=i("b24b"),r=i.n(n);r.a},b24b:function(t,e,i){},b28c:function(t,e,i){},c27d:function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);var n,r,o=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("DemoChoice")},a=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"root"}},[i("div",{attrs:{id:"choice"}},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.currentDemo,expression:"currentDemo"}],attrs:{id:"selection"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.currentDemo=e.target.multiple?i:i[0]}}},t._l(t.demos,function(e){return i("option",{key:e.title,domProps:{value:e.component}},[t._v("\n                "+t._s(e.title)+"\n            ")])}),0)]),i("transition",{attrs:{name:"demo",mode:"out-in"}},[i(t.currentDemo,{tag:"component"})],1)],1)},c=[],u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"root"}},[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}}),i("RestartButton",{attrs:{id:"restart-button"},on:{click:t.restartEngine}}),i("GravitySlider",{attrs:{engine:t.simulation.engine}})],1)},p=[],f=function(){function t(t,e){this.engine=t,this.drawing=e}return t.prototype.redraw=function(){this.drawing.redraw()},t.prototype.integrateTime=function(t){this.engine.integrateTime(t)},t}(),d=f,h=i("9ab4"),g=function(t){function e(){return t.call(this,"Not implemented")||this}return h["a"](e,t),e}(Error),m=g,v={data(){return{simulation:void 0}},created(){const t=this.createEngine({});this.simulation=new d(t,this.createDrawing(t))},mounted(){this.simulation.drawing.context=document.getElementsByTagName("canvas")[0].getContext("2d")},methods:{createEngine(t){throw new m},createDrawing(t){throw new m},restartEngine(){this.simulation.engine=this.createEngine(this.simulation.engine),this.simulation.drawing.engine=this.simulation.engine}}},y=v,w=i("2877"),b=Object(w["a"])(y,n,r,!1,null,null,null),x=b.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"gravity-slider"}},[t._v("\n    Gravity\n  ")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.engine.gravity,expression:"engine.gravity",modifiers:{number:!0}}],attrs:{id:"gravity-slider",type:"range",min:"0",max:"1e-5",step:"1e-9"},domProps:{value:t.engine.gravity},on:{__r:function(e){t.$set(t.engine,"gravity",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])},S=[],E={props:{engine:Object}},_=E,j=Object(w["a"])(_,P,S,!1,null,null,null),O=j.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("button",t._g({},t.$listeners),[t._v("\n        Restart\n    ")])])},M=[],q={},T=Object(w["a"])(q,D,M,!1,null,null,null),F=T.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("SimulationDisplay",{attrs:{simulation:t.simulation},on:{mousemove:t.onMouseMove,mouseup:t.onMouseUp,mousedown:t.onMouseDown,mouseleave:t.onMouseLeave}})},$=[],R=1e-5;function A(t,e){for(var i,n,r=0;r<t.length;++r){var o=t[r];void 0!==o&&((void 0===i||void 0===n||e(o,n))&&(i=r,n=o))}return void 0!==i?i:-1}function k(t,e){var i,n=function(t,e){return t<e};return i=A(void 0!==e?t.map(e):t,n),-1===i?void 0:t[i]}function C(t,e,i){return void 0===i&&(i=R),Math.abs(t-e)<=i}function L(t){var e=Math.min.apply(Math,h["c"](t.limits)),i=Math.max.apply(Math,h["c"](t.limits));return e<=t.value&&t.value<=i}function z(t,e){return t>0&&e>0||t<0&&e<0}function B(t){for(var e=1;e<t.length;++e)if(!t[e].origin.almostEquals(t[e-1].end))return!1;return t[0].origin.almostEquals(t[t.length-1].end)}function N(t,e){setTimeout(function(){t(),N(t,e)},e)}var V=function(){function t(t,e){this.x=t,this.y=e}return Object.defineProperty(t,"zero",{get:function(){return new t(0,0)},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.x=0,this.y=0},t.prototype.normal=function(e){var i=new t(-this.y,this.x).normalized;return i.dot(e)>0?i:i.negated},t.prototype.flippedTowards=function(t){return this.dot(t)>0?this.cloned:this.negated},Object.defineProperty(t.prototype,"cloned",{get:function(){return new t(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(this.magnitudeSquared)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"magnitudeSquared",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"normalized",{get:function(){return this.scaled(1/this.magnitude)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"negated",{get:function(){return new t(-this.x,-this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNormalized",{get:function(){return C(this.magnitudeSquared,1)},enumerable:!0,configurable:!0}),t.prototype.almostEquals=function(t){return C(this.x,t.x)&&C(this.y,t.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.added=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.subtracted=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.scaled=function(e){return new t(this.x*e,this.y*e)},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.negate=function(){this.x=-this.x,this.y=-this.y},t.prototype.distanceSquared=function(t){return this.subtracted(t).magnitudeSquared},t.prototype.distance=function(t){return Math.sqrt(this.distanceSquared(t))},t.prototype.direction=function(t){return t.subtracted(this).normalized},t.prototype.projected=function(t){return t.isNormalized||(t=t.normalized),t.scaled(this.dot(t))},t.prototype.toString=function(){return"Vector("+this.x+", "+this.y+")"},t}(),H=V,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{attrs:{width:"500",height:"500"},on:{mousemove:function(e){return t.reEmit("mousemove",e)},mousedown:function(e){return t.reEmit("mousedown",e)},mouseup:function(e){return t.reEmit("mouseup",e)},mouseleave:function(e){return t.$emit("mouseleave")}}})},G=[];function J(t,e){e&&(t.fillStyle=e),t.fillRect(0,0,t.canvas.width,t.canvas.height)}function W(t,e,i){i&&(t.fillStyle=i),t.beginPath();var n=K(e.origin,t.canvas),r=t.canvas.width*e.radius/2,o=t.canvas.height*e.radius/2;t.ellipse(n.x,n.y,r,o,0,0,2*Math.PI),t.fill()}function X(t,e,i){i&&(t.strokeStyle=i),t.beginPath();var n=K(e.origin,t.canvas);t.moveTo(n.x,n.y);var r=K(e.end,t.canvas);t.lineTo(r.x,r.y),t.stroke()}function Y(t,e,i){var n,r;i&&(t.fillStyle=i);var o=e.edges.map(function(e){return K(e.origin,t.canvas)});t.beginPath(),t.moveTo(o[0].x,o[0].y);try{for(var s=h["d"](o.slice(1)),a=s.next();!a.done;a=s.next()){var l=a.value;t.lineTo(l.x,l.y)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}t.fill()}function K(t,e){var i=t.added(new H(1,1)).scaled(.5);return new H(e.width*i.x,e.height*(1-i.y))}function Q(t,e){var i=new H(t.x/e.width,1-t.y/e.height);return i.added(new H(-.5,-.5)).scaled(2)}var Z={props:{simulation:Object},data(){return{running:!0}},destroyed(){this.running=!1},mounted(){const t=e=>{this.running&&(this.simulation.integrateTime(e),this.simulation.redraw(),requestAnimationFrame(t))};requestAnimationFrame(t)},methods:{reEmit(t,e){const{canvas:i}=this.simulation.drawing.context;this.$emit(t,Q(this.clickPosition(e),i))},clickPosition(t){const{canvas:e}=this.simulation.drawing.context,{left:i,top:n}=e.getBoundingClientRect();return new H(t.clientX-i,t.clientY-n)}}},tt=Z,et=Object(w["a"])(tt,U,G,!1,null,null,null),it=et.exports;const nt=.09,rt=nt*nt,ot=.09;class st{static get length(){return 10}static get collectionDelay(){return 10}constructor(){this.entries=[]}addPosition(t){this.entries.push(t),this.entries.length>st.length&&(this.entries=this.entries.slice(1))}averageDelta(){const t=Array.from(this.deltas());if(0===t.length)return H.zero;const e=H.zero;for(const i of t)e.add(i);return e.scale(1/t.length),e}*deltas(){if(!(this.entries.length<2))for(let t=0;t<this.entries.length-1;++t)yield this.entries[t+1].subtracted(this.entries[t])}}var at={components:{SimulationDisplay:it},props:{simulation:Object},data(){return{selection:{particle:void 0,wasFixed:void 0},lastMousePosition:H.zero,mouseHistory:new st}},created(){N(()=>{void 0!==this.selection.particle&&this.mouseHistory.addPosition(this.lastMousePosition)},st.collectionDelay)},methods:{onMouseDown(t){this.selection.particle=this.newlySelectedParticle(t),void 0!==this.selection.particle&&(this.selection.particle.origin=t,this.selection.wasFixed=this.selection.particle.fixed,this.selection.particle.fixed=!0,this.selection.particle.velocity=H.zero)},onMouseMove(t){this.lastMousePosition=t,void 0!==this.selection.particle&&(this.selection.particle.origin=t)},updateMouseHistory(){this.mouseHistory.push(this.lastMousePosition),this.mouseHistory.length>mouseHistoryLength&&(this.mouseHistory=this.mouseHistory.slice(1))},onMouseUp(t){void 0!==this.selection.particle&&(this.selection.wasFixed||(this.selection.particle.fixed=!1,this.throwSelectedParticle(t)),this.selection.particle=void 0)},onMouseLeave(){void 0!==this.selection.particle&&(this.selection.wasFixed||(this.selection.particle.fixed=!1),this.selection.particle=void 0)},throwSelectedParticle(){const t=this.mouseHistory.averageDelta();this.selection.particle.velocity=t.scaled(ot)},newlySelectedParticle(t){return k(this.simulation.engine.particles,e=>{const i=e.origin.distanceSquared(t);if(!(i>rt))return i})}}},lt=at,ct=Object(w["a"])(lt,I,$,!1,null,null,null),ut=ct.exports,pt=3e3,ft=function(){function t(){this.timeAccumulator=0,this.lastIntegrationTime=void 0}return Object.defineProperty(t,"timestep",{get:function(){return 6},enumerable:!0,configurable:!0}),t.prototype.integrateTime=function(e){if(void 0!==this.lastIntegrationTime){var i=e-this.lastIntegrationTime;if(this.lastIntegrationTime=e,!(i>pt)){this.timeAccumulator+=i;while(this.timeAccumulator>=t.timestep)this.timeAccumulator-=t.timestep,this.integrateStep()}}else this.lastIntegrationTime=e},t}(),dt=ft;function ht(t,e){var i=t.radius+e.radius;return i*i>=t.origin.distanceSquared(e.origin)}var gt=.012,mt=function(){function t(t){this.force=H.zero,this.velocity=H.zero,this.origin=t.origin,this.mass=t.mass||1,this.gravityScale=t.gravityScale||1,this.fixedRadius=t.fixedRadius,this.fixed=t.fixed||!1}return t.prototype.update=function(t,e){this.fixed?this.velocity=H.zero:(this.applyGravity(t),this.updateVelocity(),this.applyDamping(e),this.updatePosition())},t.prototype.applyGravity=function(t){this.force.add(new H(0,-t*this.mass).scaled(this.gravityScale))},t.prototype.overlaps=function(t){return ht(this,t)},Object.defineProperty(t.prototype,"radius",{get:function(){return void 0!==this.fixedRadius?this.fixedRadius:gt*Math.sqrt(this.mass)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this.velocity.magnitude},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speedSquared",{get:function(){return this.velocity.magnitudeSquared},enumerable:!0,configurable:!0}),t.prototype.applyDamping=function(t){this.velocity.scale(Math.pow(1-t,dt.timestep))},t.prototype.updateVelocity=function(){this.velocity.add(this.acceleration.scaled(dt.timestep))},t.prototype.updatePosition=function(){this.origin.add(this.velocity.scaled(dt.timestep))},Object.defineProperty(t.prototype,"acceleration",{get:function(){return this.force.scaled(1/this.mass)},enumerable:!0,configurable:!0}),t}(),vt=mt,yt=function(){function t(t){this.particles=t,this.particles=t,this.normal=this.particles[0].origin.direction(this.particles[1].origin),this.impactSpeed=this.particles[0].velocity.dot(this.normal)+this.particles[1].velocity.dot(this.normal.negated);var e=this.particles[0].origin.distance(this.particles[1].origin);this.interpenetration=this.particles[0].radius+this.particles[1].radius-e}return t.prototype.solve=function(){this.solveInterpenetration(),this.solveBounce()},t.prototype.solveInterpenetration=function(){var t=this.normal.scaled(this.interpenetration/2);this.particles[0].origin.subtract(t),this.particles[1].origin.add(t)},t.prototype.solveBounce=function(){var t=this.particles[0].mass+this.particles[1].mass;this.particles[0].velocity=this.normal.scaled(-this.particles[1].mass*this.impactSpeed/t),this.particles[1].velocity=this.normal.scaled(this.particles[0].mass*this.impactSpeed/t)},t}(),wt=yt,bt=13e-5,xt=bt*bt,Pt=function(){function t(t){this.particle=t.particle,this.terrainElement=t.terrainElement,this.terrainEdge=this.terrainElement.polygon.closestEdge(this.particle.origin),this.normal=this.terrainEdge.normal(this.particle.velocity.negated);var e=this.terrainEdge.closestPoint(this.particle.origin),i=e.distance(this.particle.origin);i<=this.particle.radius?this.interpenetration=this.particle.radius-i:this.interpenetration=this.particle.radius+i}return t.prototype.solve=function(){this.removeInterpenetration(),this.bounceParticle()||(this.slideParticle(),this.applyFriction())},t.prototype.removeInterpenetration=function(){this.particle.origin.add(this.normal.scaled(this.interpenetration))},t.prototype.slideParticle=function(){var t=this.terrainEdge.offset.flippedTowards(this.particle.velocity);this.particle.velocity=this.particle.velocity.projected(t)},t.prototype.applyFriction=function(){this.particle.velocity.scale(1-this.terrainElement.friction)},t.prototype.bounceParticle=function(){if(this.particle.speedSquared<xt)return!1;var t=this.particle.velocity.projected(this.normal).negated;return this.particle.velocity.add(t.scaled(1+this.terrainElement.restitution)),!0},t}(),St=Pt,Et=10;function _t(t){return t.x>=-Et&&t.x<=Et&&t.y>=-Et&&t.y<=Et}var jt=function(t){function e(e){var i=t.call(this)||this;return i.gravity=1e-6,i.damping=7e-4,i.particles=[],i.springs=[],i.terrain=[],void 0!==e.gravity&&(i.gravity=e.gravity),void 0!==e.damping&&(i.damping=e.damping),void 0!==e.particles&&(i.particles=e.particles),void 0!==e.springs&&(i.springs=e.springs),void 0!==e.terrain&&(i.terrain=e.terrain),i}return h["a"](e,t),e.prototype.clearUselessParticles=function(){this.particles=this.particles.filter(function(t){return _t(t.origin)})},e.prototype.integrateStep=function(){this.resetForces(),this.solveContacts(),this.updateSprings(),this.updateParticles(),this.clearUselessParticles()},e.prototype.solveContacts=function(){var t,e;try{for(var i=h["d"](this.findContacts()),n=i.next();!n.done;n=i.next()){var r=n.value;r.solve()}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e.prototype.findContacts=function(){return h["c"](this.findParticleContacts(),this.findTerrainContacts())},e.prototype.findParticleContacts=function(){var t,e,i,n,r,o,s,a;return h["b"](this,function(l){switch(l.label){case 0:t=0,l.label=1;case 1:if(!(t<this.particles.length-1))return[3,10];e=this.particles[t],l.label=2;case 2:l.trys.push([2,7,8,9]),s=void 0,i=h["d"](this.particles.slice(t+1)),n=i.next(),l.label=3;case 3:return n.done?[3,6]:(r=n.value,r.overlaps(e)?[4,new wt([e,r])]:[3,5]);case 4:l.sent(),l.label=5;case 5:return n=i.next(),[3,3];case 6:return[3,9];case 7:return o=l.sent(),s={error:o},[3,9];case 8:try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(s)throw s.error}return[7];case 9:return++t,[3,1];case 10:return[2]}})},e.prototype.findTerrainContacts=function(){var t,e,i,n,r,o,s,a,l,c,u,p;return h["b"](this,function(f){switch(f.label){case 0:f.trys.push([0,11,12,13]),t=h["d"](this.particles),e=t.next(),f.label=1;case 1:if(e.done)return[3,10];i=e.value,f.label=2;case 2:f.trys.push([2,7,8,9]),u=void 0,n=h["d"](this.terrain),r=n.next(),f.label=3;case 3:return r.done?[3,6]:(o=r.value,o.polygon.overlapsCircle(i)?[4,new St({particle:i,terrainElement:o})]:[3,5]);case 4:f.sent(),f.label=5;case 5:return r=n.next(),[3,3];case 6:return[3,9];case 7:return s=f.sent(),u={error:s},[3,9];case 8:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(u)throw u.error}return[7];case 9:return e=t.next(),[3,1];case 10:return[3,13];case 11:return a=f.sent(),l={error:a},[3,13];case 12:try{e&&!e.done&&(c=t.return)&&c.call(t)}finally{if(l)throw l.error}return[7];case 13:return[2]}})},e.prototype.resetForces=function(){var t,e;try{for(var i=h["d"](this.particles),n=i.next();!n.done;n=i.next()){var r=n.value;r.force.reset()}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e.prototype.updateSprings=function(){var t,e;try{for(var i=h["d"](this.springs),n=i.next();!n.done;n=i.next()){var r=n.value;r.update()}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e.prototype.updateParticles=function(){var t,e;try{for(var i=h["d"](this.particles),n=i.next();!n.done;n=i.next()){var r=n.value;r.update(this.gravity,this.damping)}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e}(dt),Ot=jt,Dt=function(){function t(t){var e=t.origin,i=t.offset,n=t.end;if(void 0!==i&&void 0!==n)throw new TypeError("Either offset or end may be specified, but not both");if(this.origin=e.cloned,void 0!==n)this.offset=n.subtracted(this.origin);else{if(void 0===i)throw new TypeError("Either offset or end must be specified");this.offset=i}}return t.prototype.almostEquals=function(t){return this.origin.almostEquals(t.origin)&&this.offset.almostEquals(t.offset)},t.prototype.normal=function(t){return this.offset.normal(t)},t.prototype.intersectsRay=function(t){var e=this.lineIntersectionParameters(t),i=e.t,n=e.u;return void 0!==i&&void 0!==n&&(-R<i&&-R<n&&n<1+R)},t.prototype.intersectsLine=function(t){var e=this.lineIntersectionParameters(t),i=e.t,n=e.u;return void 0!==i&&void 0!==n&&(-R<i&&i<1+R&&-R<n&&n<1+R)},t.prototype.lineIntersection=function(t){var e=this.lineIntersectionParameters(t),i=e.t,n=e.u;if(void 0!==i&&void 0!==n&&!(i>1+R||i<-R||n>1+R||n<-R))return this.offset.scaled(i).added(this.origin)},t.prototype.lineIntersectionParameters=function(t){var e=t.origin.subtracted(this.origin),i=this.offset.cross(t.offset);return C(i,0)?{t:void 0,u:void 0}:{t:e.cross(t.offset)/i,u:e.negated.cross(this.offset)/-i}},t.prototype.intersectsCircle=function(t){var e=this.closestPoint(t.origin);return t.origin.distanceSquared(e)<=t.radius*t.radius},t.prototype.containsPoint=function(t){return C(t.subtracted(this.origin).cross(this.offset),0)&&L({value:t.x,limits:[this.origin.x,this.end.x]})&&L({value:t.y,limits:[this.origin.y,this.end.y]})},t.prototype.closestPoint=function(t){var e=t.subtracted(this.origin).dot(this.offset),i=t.subtracted(this.end).dot(this.offset.negated);if(!z(e,i))return this.origin.distanceSquared(t)<this.end.distanceSquared(t)?this.origin:this.end;if(0===this.offset.x)return new H(this.origin.x,t.y);if(0===this.offset.y)return new H(t.x,this.origin.y);var n=this.offset.dot(t),r=(n*this.offset.y+this.offset.x*this.offset.cross(this.origin))/this.offset.magnitudeSquared;return new H((n-r*this.offset.y)/this.offset.x,r)},t.prototype.distance=function(t){return Math.sqrt(this.distanceSquared(t))},t.prototype.distanceSquared=function(t){return this.closestPoint(t).distanceSquared(t)},Object.defineProperty(t.prototype,"opposite",{get:function(){return new t({origin:this.origin,offset:this.offset.negated})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.origin.added(this.offset)},set:function(t){this.offset=t.subtracted(this.origin)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.offset.x*this.offset.x+this.offset.y*this.offset.y},enumerable:!0,configurable:!0}),t}(),Mt=Dt,qt=1e5,Tt=100,Ft="white",It={hue:225,saturation:70,lightness:40},$t=360,Rt="grey",At="rgb(155, 200, 200)",kt="brown",Ct="red",Lt=function(){function t(t){this.hiddenObjects=[],this.context=t.context,this.engine=t.engine,this.drawingForces=t.drawingForces||!1,this.drawingVelocities=t.drawingVelocities||!1,this.drawingTerrain=t.drawingTerrain||!0,this.drawingSprings=t.drawingSprings||!0,this.drawingParticles=t.drawingParticles||!0}return t.prototype.redraw=function(){this.clear(),this.drawTerrain(),this.drawParticles(),this.drawSprings(),this.drawForces(),this.drawVelocities()},t.prototype.clear=function(){void 0!==this.context&&J(this.context,Ft)},t.prototype.drawTerrain=function(){var t,e;if(this.drawingTerrain&&void 0!==this.context)try{for(var i=h["d"](this.visibleObjects(this.engine.terrain)),n=i.next();!n.done;n=i.next()){var r=n.value.polygon;Y(this.context,r,At)}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.drawForces=function(){var t,e;if(this.drawingForces&&void 0!==this.context)try{for(var i=h["d"](this.visibleObjects(this.engine.particles)),n=i.next();!n.done;n=i.next()){var r=n.value;X(this.context,new Mt({origin:r.origin,offset:r.force.scaled(qt)}),kt)}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.drawVelocities=function(){var t,e;if(this.drawingVelocities&&void 0!==this.context)try{for(var i=h["d"](this.visibleObjects(this.engine.particles)),n=i.next();!n.done;n=i.next()){var r=n.value;X(this.context,new Mt({origin:r.origin,offset:r.velocity.scaled(Tt)}),Ct)}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.drawParticles=function(){var t,e;if(this.drawingParticles&&0!==this.engine.particles.length&&void 0!==this.context){var i=It.hue,n=Math.min(($t-It.hue)/this.engine.particles.length,20);try{for(var r=h["d"](this.visibleObjects(this.engine.particles)),o=r.next();!o.done;o=r.next()){var s=o.value,a="hsl("+i+", "+It.saturation+"%, "+It.lightness+"%)";W(this.context,s,a),i-=n}}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}},t.prototype.drawSprings=function(){var t,e;if(this.drawingSprings&&void 0!==this.context)try{for(var i=h["d"](this.visibleObjects(this.engine.springs)),n=i.next();!n.done;n=i.next()){var r=n.value;X(this.context,r.line,Rt)}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.visibleObjects=function(t){var e=this;return t.filter(function(t){return!e.hiddenObjects.some(function(e){return e===t})})},t}(),zt=Lt,Bt={components:{InteractiveSimulationDisplay:ut,RestartButton:F,GravitySlider:O},mixins:[x],methods:{createEngine(t){return new Ot({gravity:t.gravity,damping:0,particles:[new vt({origin:new H(0,0)})]})},createDrawing(t){return new zt({engine:t})}}},Nt=Bt,Vt=(i("4826"),Object(w["a"])(Nt,u,p,!1,null,null,null)),Ht=Vt.exports,Ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"root"}},[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}}),i("RestartButton",{attrs:{id:"restart-button"},on:{click:t.restartEngine}}),i("StiffnessSlider",{model:{value:t.stiffness,callback:function(e){t.stiffness=e},expression:"stiffness"}})],1)},Gt=[],Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"stiffness-slider"}},[t._v("\n    Stiffness\n  ")]),i("input",{attrs:{id:"stiffness-slider",type:"range",min:"1e-6",max:"1e-4",step:"1e-9"},domProps:{value:t.value},on:{input:function(e){t.$emit("input",Number(e.target.value))}}})])},Wt=[],Xt={props:{value:Number}},Yt=Xt,Kt=Object(w["a"])(Yt,Jt,Wt,!1,null,null,null),Qt=Kt.exports,Zt=function(){function t(t){if(this.particles=t,2!==t.length)throw new Error("Wrong number of particles");this.restingLength=this.currentLength}return t.prototype.update=function(){this.contract(this.particles[0],this.particles[1]),this.contract(this.particles[1],this.particles[0])},Object.defineProperty(t.prototype,"line",{get:function(){return new Mt({origin:this.particles[0].origin,end:this.particles[1].origin})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLength",{get:function(){return this.particles[0].origin.distance(this.particles[1].origin)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthDelta",{get:function(){return this.currentLength-this.restingLength},enumerable:!0,configurable:!0}),t}(),te=Zt,ee=function(t){function e(e){var i=t.call(this,e.particles)||this;return i.stiffness=e.stiffness,i}return h["a"](e,t),e.prototype.contract=function(t,e){var i=t.origin.direction(e.origin);t.force.add(i.scaled(this.contractionMagnitude))},Object.defineProperty(e.prototype,"contractionMagnitude",{get:function(){return this.stiffness*this.lengthDelta},enumerable:!0,configurable:!0}),e}(te),ie=ee,ne={components:{InteractiveSimulationDisplay:ut,RestartButton:F,StiffnessSlider:Qt},mixins:[x],data(){return{stiffness:1e-5}},watch:{stiffness(t){this.simulation.engine.springs[0].stiffness=t}},methods:{createEngine(t){const e=[new vt({origin:H.zero,mass:1,fixed:!0}),new vt({origin:new H(-.2,.2),gravityScale:2.5,mass:1})];return new Ot({gravity:t.gravity,damping:t.damping,particles:e,springs:[new ie({particles:e,stiffness:this.stiffness})]})},createDrawing(t){return new zt({engine:t})}}},re=ne,oe=(i("2646"),Object(w["a"])(re,Ut,Gt,!1,null,null,null)),se=oe.exports,ae=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"root"}},[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}}),i("RestartButton",{on:{click:t.restartEngine}}),i("div",{attrs:{id:"remaining-ui"}},[i("RestitutionSlider",{model:{value:t.restitution,callback:function(e){t.restitution=e},expression:"restitution"}}),i("AngleSlider",{model:{value:t.platformAngle,callback:function(e){t.platformAngle=e},expression:"platformAngle"}}),i("LengthSlider",{model:{value:t.platformLength,callback:function(e){t.platformLength=e},expression:"platformLength"}})],1)],1)},le=[],ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"restitution-slider"}},[t._v("\n    Restitution\n  ")]),i("input",{attrs:{id:"restitution-slider",type:"range",min:"0",max:"0.9",step:"1e-9"},domProps:{value:t.value},on:{input:function(e){t.$emit("input",Number(e.target.value))}}})])},ue=[],pe={props:{value:Number,terrainElement:Object}},fe=pe,de=Object(w["a"])(fe,ce,ue,!1,null,null,null),he=de.exports,ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"angle-slider"}},[t._v("\n    Angle\n  ")]),i("input",{attrs:{id:"angle-slider",type:"range",min:"-1.57",max:"1.57",step:"1e-9"},domProps:{value:t.value},on:{input:function(e){t.$emit("input",Number(e.target.value))}}})])},me=[],ve=o["a"].extend({props:{value:Number}}),ye=ve,we=Object(w["a"])(ye,ge,me,!1,null,null,null),be=we.exports,xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"length-slider"}},[t._v("\n    Length\n  ")]),i("input",{attrs:{id:"length-slider",type:"range",min:"0.2",max:"4",step:"1e-9"},domProps:{value:t.value},on:{input:function(e){t.$emit("input",Number(e.target.value))}}})])},Pe=[],Se={props:{value:Number}},Ee=Se,_e=Object(w["a"])(Ee,xe,Pe,!1,null,null,null),je=_e.exports;function Oe(t){for(var e=[],i=0;i<t.length-1;++i)e.push(new Mt({origin:t[i].cloned,end:t[i+1].cloned}));return e.push(new Mt({origin:t[t.length-1].cloned,end:t[0].cloned})),e}function De(t){return t.map(function(t){return t.origin})}var Me=function(){function t(t){var e=t.vertices,i=t.edges;if(void 0!==e&&void 0!==i)throw new Error("Either vertices or edges should be specified, but not both");if(void 0===e){if(void 0===i)throw new Error("Either vertices or edges must be specified");if(i.length<3)throw new Error("A polygon must contain at least three edges");if(!B(i))throw new Error("Polygon edges must be connected");this.vertices=De(i)}else{if(e.length<3)throw new Error("A polygon must contain at least three vertices");this.vertices=Array.from(e)}}return Object.defineProperty(t.prototype,"isCounterClockwise",{get:function(){for(var t=this.edges,e=0,i=0;i<t.length-1;++i){if(e=t[i].offset.cross(t[i+1].offset),C(e,0))throw new Error("Two edges are collinear");if(e<0)return!1}if(e=t[t.length-1].offset.cross(t[0].offset),C(e,0))throw new Error("Two edges are collinear");return e>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edges",{get:function(){return Array.from(Oe(this.vertices))},enumerable:!0,configurable:!0}),t.prototype.overlapsCircle=function(t){var e,i;try{for(var n=h["d"](this.edges),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.intersectsCircle(t))return!0}}catch(a){e={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}var s=new Mt({origin:t.origin,offset:new H(1,0)});return this.countIntersections(s)%2===1},t.prototype.containsPoint=function(t){if(this.isVertex(t))return!0;var e=new Mt({origin:t,offset:new H(1,0)});return this.countIntersections(e)%2===1},t.prototype.isVertex=function(t){return this.vertices.some(function(e){return e.almostEquals(t)})},t.prototype.countIntersections=function(t){return this.edges.reduce(function(e,i){return t.intersectsRay(i)?e+1:e},0)},t.prototype.closestEdge=function(t){return k(this.edges,function(e){return e.distance(t)})},t}(),qe=Me,Te=function(){function t(t){if(!t.polygon.isCounterClockwise)throw new Error("Polygon must be in counter-clockwise order");this.polygon=t.polygon,this.restitution=t.restitution||0,this.friction=t.friction||0}return t}(),Fe=Te;function Ie(){return new H(0,.9)}var $e={components:{InteractiveSimulationDisplay:ut,RestartButton:F,RestitutionSlider:he,AngleSlider:be,LengthSlider:je},mixins:[x],data(){const t=.45;return{particle:new vt({origin:Ie(),mass:1}),platform:new Fe({polygon:new qe({vertices:[new H(-.5,-2),new H(.5,-2),new H(.5,0),new H(-.5,0)]}),restitution:t,friction:.01}),platformAngle:0,platformLength:1,restitution:t}},watch:{platformAngle(){this.updatePlatformLayout()},platformLength(){this.updatePlatformLayout()},restitution(){for(const t of this.simulation.engine.terrain)t.restitution=this.restitution}},methods:{createEngine(t){return this.particle.origin=Ie(),this.particle.velocity=H.zero,new Ot({gravity:t.gravity,damping:t.damping,particles:[this.particle],terrain:[this.platform,new Fe({restitution:this.restitution,friction:.01,polygon:new qe({vertices:[new H(.8,-5),new H(4,-5),new H(4,5),new H(.8,5)]})})]})},createDrawing(t){return new zt({engine:t})},updatePlatformLayout(){const t=this.platformLength/2,e=t*Math.cos(this.platformAngle),i=t*Math.sin(this.platformAngle);this.platform.polygon=new qe({vertices:[new H(-e,-2),new H(e,-2),new H(e,i),new H(-e,-i)]}),this.simulation.engine.terrain[0].polygon=this.platform.polygon}}},Re=$e,Ae=(i("353e"),Object(w["a"])(Re,ae,le,!1,null,null,null)),ke=Ae.exports,Ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"root"}},[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}}),i("RestartButton",{attrs:{id:"restart-button"},on:{click:t.restartEngine}}),i("div",{attrs:{id:"remaining-ui"}},[i("div",{attrs:{id:"force-slider"}},[i("label",[t._v("Force")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.firingForce,expression:"firingForce",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"1e-3",step:"1e-9"},domProps:{value:t.firingForce},on:{__r:function(e){t.firingForce=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}})]),i("ParticleMassSliders",{attrs:{particles:t.particles,min:1,max:5}})],1)],1)},Le=[],ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("tbody",t._l(t.particles,function(e,n){return i("tr",{key:n},[i("label",{attrs:{for:"mass-input"+n}},[t._v("\n        Particle "+t._s(n)+" mass\n      ")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.mass,expression:"particle.mass",modifiers:{number:!0}}],attrs:{id:"mass-input"+n,type:"range",min:t.min,max:t.max,step:"1e-9"},domProps:{value:e.mass},on:{__r:function(i){t.$set(e,"mass",t._n(i.target.value))},blur:function(e){return t.$forceUpdate()}}})])}),0)])},Be=[],Ne={props:{particles:Array,min:Number,max:Number}},Ve=Ne,He=Object(w["a"])(Ve,ze,Be,!1,null,null,null),Ue=He.exports;const Ge=new H(-.5,0),Je=new H(.5,0);class We extends vt{constructor({firingForce:t,...e}){super(e),this.firingForce=t,this.fired=!1}updateVelocity(t){this.fired||(this.fired=!0,this.force.add(this.firingForce)),super.updateVelocity(t)}}var Xe={components:{InteractiveSimulationDisplay:ut,RestartButton:F,ParticleMassSliders:Ue},mixins:[x],data(){const t=13e-5;return{firingForce:t,particles:[new We({origin:Ge.cloned,mass:1,firingForce:new H(t,0)}),new We({origin:Je.cloned,mass:1,firingForce:new H(-t,0)})]}},methods:{createEngine(){return this.particles[0].origin=Ge.cloned,this.particles[0].velocity=H.zero,this.particles[0].fired=!1,this.particles[0].firingForce=new H(this.firingForce,0),this.particles[1].origin=Je.cloned,this.particles[1].velocity=H.zero,this.particles[1].fired=!1,this.particles[1].firingForce=new H(-this.firingForce,0),new Ot({gravity:0,particles:this.particles})},createDrawing(t){return new zt({engine:t})}}},Ye=Xe,Ke=(i("957a"),Object(w["a"])(Ye,Ce,Le,!1,null,null,null)),Qe=Ke.exports,Ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"root"}},[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}}),i("RestartButton",{attrs:{id:"restart-button"},on:{click:t.restartEngine}})],1)},ti=[],ei=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h["a"](e,t),e.prototype.contract=function(t,e){t.fixed||(e.fixed?this.contractOne(t,e):this.contractBoth(t,e))},e.prototype.contractOne=function(t,e){var i=t.origin.direction(e.origin);t.origin.add(i.scaled(this.lengthDelta))},e.prototype.contractBoth=function(t,e){var i=t.origin.direction(e.origin),n=t.mass+e.mass;t.origin.add(i.scaled(this.lengthDelta*e.mass/n))},e}(te),ii=ei,ni={components:{InteractiveSimulationDisplay:ut,RestartButton:F},mixins:[x],methods:{createEngine(){const t=[new vt({origin:new H(0,.8)}),new vt({origin:new H(-.35,.5)})];return new Ot({particles:t,springs:[new ii(t)],terrain:[new Fe({polygon:new qe({vertices:[new H(5,-5),new H(5,5),new H(.7,5),new H(.7,-5)]}),restitution:.3}),new Fe({polygon:new qe({vertices:[new H(.8,0),new H(-5,0),new H(-5,-5),new H(.8,-5)]}),restitution:.3})]})},createDrawing(t){return new zt({engine:t})}}},ri=ni,oi=(i("aa13"),Object(w["a"])(ri,Ze,ti,!1,null,null,null)),si=oi.exports,ai=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"root"}},[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}}),i("RestartButton",{attrs:{id:"restart-button"},on:{click:t.restartEngine}})],1)},li=[],ci={components:{InteractiveSimulationDisplay:ut,RestartButton:F},mixins:[x],methods:{createEngine(t){const e=[new vt({origin:new H(-.1,.1)}),new vt({origin:new H(.1,.1)}),new vt({origin:new H(.1,-.1)}),new vt({origin:new H(-.1,-.1)})],i=[new Fe({polygon:new qe({vertices:[new H(-1,-1),new H(1,-1),new H(1,-.5),new H(-1,-.5)]})})],n=[new ie({particles:[e[0],e[1]],stiffness:.001}),new ie({particles:[e[1],e[2]],stiffness:.001}),new ie({particles:[e[2],e[3]],stiffness:.001}),new ie({particles:[e[3],e[0]],stiffness:.001}),new ie({particles:[e[0],e[2]],stiffness:.001}),new ie({particles:[e[1],e[3]],stiffness:.001})];return new Ot({particles:e,terrain:i,springs:n})},createDrawing(t){return new zt({engine:t})}}},ui=ci,pi=(i("8208"),Object(w["a"])(ui,ai,li,!1,null,null,null)),fi=pi.exports,di={data(){return{demos:[{title:"Particle Demo",component:Ht},{title:"Spring Demo",component:se},{title:"Terrain Demo",component:ke},{title:"Particle Collision Demo",component:Qe},{title:"Rod Demo",component:si},{title:"Shapes Demo",component:fi}],currentDemo:void 0}}},hi=di,gi=(i("0e39"),Object(w["a"])(hi,l,c,!1,null,null,null)),mi=gi.exports,vi={components:{DemoChoice:mi}},yi=vi,wi=Object(w["a"])(yi,s,a,!1,null,null,null),bi=wi.exports;o["a"].config.productionTip=!1,new o["a"]({el:"#app",render:function(t){return t(bi)}})}});
//# sourceMappingURL=app.42da5eee.js.map