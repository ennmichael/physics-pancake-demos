(function(t){function e(e){for(var n,o,a=e[0],l=e[1],c=e[2],d=0,h=[];d<a.length;d++)o=a[d],s[o]&&h.push(s[o][0]),s[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,a=1;a<i.length;a++){var l=i[a];0!==s[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},s={app:0},r=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/physics-pancake/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("DemoChoice")},r=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.currentDemo,expression:"currentDemo"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.currentDemo=e.target.multiple?i:i[0]}}},t._l(t.demos,function(e){return i("option",{key:e.title,domProps:{value:e.component}},[t._v("\n      "+t._s(e.title)+"\n    ")])}),0),i(t.currentDemo,{tag:"component"})],1)},a=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("tbody",[i("tr",[i("td",[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}})],1)]),i("tr",[i("td",[i("RestartButton",{on:{click:t.restartEngine}})],1)]),i("tr",[i("td",[i("GravitySlider",{attrs:{engine:t.simulation.engine}})],1)])])])},c=[];class u{constructor({drawing:t,engine:e}){this.engine=e,this.drawing=t}redraw(){this.drawing.redraw(this.engine)}integrateTime(t){this.engine.integrateTime(t)}}class d extends Error{}var h,p,f={data(){return{simulation:void 0}},created(){this.simulation=new u({engine:this.createEngine({}),drawing:this.createDrawing()})},mounted(){this.simulation.drawing.context=document.getElementsByTagName("canvas")[0].getContext("2d")},methods:{createEngine(t){throw new d},createDrawing(){throw new d},restartEngine(){this.simulation.engine=this.createEngine(this.simulation.engine)}}},m=f,g=i("2877"),v=Object(g["a"])(m,h,p,!1,null,null,null);v.options.__file="Demo.vue";var y=v.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"gravity-slider"}},[t._v("\n    Gravity\n  ")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.engine.gravity,expression:"engine.gravity",modifiers:{number:!0}}],attrs:{id:"gravity-slider",type:"range",min:"0",max:"1e-5",step:"1e-9"},domProps:{value:t.engine.gravity},on:{__r:function(e){t.$set(t.engine,"gravity",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])},x=[],b={props:{engine:Object}},_=b,S=Object(g["a"])(_,w,x,!1,null,null,null);S.options.__file="GravitySlider.vue";var P=S.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",t._g({},t.$listeners),[t._v("\n  Restart\n")])},D=[],M={},q=Object(g["a"])(M,E,D,!1,null,null,null);q.options.__file="RestartButton.vue";var j=q.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("SimulationDisplay",{attrs:{simulation:t.simulation},on:{mousemove:t.onMouseMove,mouseup:t.onMouseUp,mousedown:t.onMouseDown,mouseleave:t.onMouseLeave}})},$=[];const T=1e-5;function F(t,e=(t=>t)){let i,n;for(const s of t){const t=e(s);void 0!==t&&((void 0===i||void 0===n||t<n)&&(i=s,n=t))}return i}function R(t,e,i=T){return Math.abs(t-e)<=i}function A({value:t,limits:e}){const i=Math.min(...e),n=Math.max(...e);return i<=t&&t<=n}function I(t,e){return t>0&&e>0||t<0&&e<0}class L{static get zero(){return new L(0,0)}constructor(t,e){this.x=t,this.y=e}reset(){this.x=0,this.y=0}normal(t){const e=new L(-this.y,this.x).normalized;return e.dot(t)>0?e:e.negated}flippedTowards(t){return this.dot(t)>0?this.cloned:this.negated}get cloned(){return new L(this.x,this.y)}get magnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitudeSquared(){return this.x*this.x+this.y*this.y}get normalized(){return this.scaled(1/this.magnitude)}get negated(){return new L(-this.x,-this.y)}get isNormalized(){return R(this.magnitudeSquared,1)}almostEquals(t){return R(this.x,t.x)&&R(this.y,t.y)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}added(t){return new L(this.x+t.x,this.y+t.y)}subtracted(t){return new L(this.x-t.x,this.y-t.y)}scaled(t){return new L(this.x*t,this.y*t)}add(t){this.x+=t.x,this.y+=t.y}subtract(t){this.x-=t.x,this.y-=t.y}scale(t){this.x*=t,this.y*=t}distanceSquared(t){return this.subtracted(t).magnitudeSquared}distance(t){return Math.sqrt(this.distanceSquared(t))}direction(t){return t.subtracted(this).normalized}projected(t){return t.isNormalized||(t=t.normalized),t.normalized.scaled(this.dot(t))}}var k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{attrs:{width:"500",height:"500"},on:{mousemove:function(e){t.reEmit("mousemove",e)},mousedown:function(e){t.reEmit("mousedown",e)},mouseup:function(e){t.reEmit("mouseup",e)},mouseleave:function(e){t.$emit("mouseleave")}}})},C=[];function B(t,e){e&&(t.fillStyle=e),t.fillRect(0,0,t.canvas.width,t.canvas.height)}function z(t,{position:e,radius:i},n){n&&(t.fillStyle=n),t.beginPath(),e=U(e,t.canvas);const s=t.canvas.width*i/2,r=t.canvas.height*i/2;t.ellipse(e.x,e.y,s,r,0,0,2*Math.PI),t.fill()}function N(t,e,i){i&&(t.strokeStyle=i),t.beginPath();const n=U(e.origin,t.canvas);t.moveTo(n.x,n.y);const s=U(e.end,t.canvas);t.lineTo(s.x,s.y),t.stroke()}function V(t,e,i){if(i&&(t.fillStyle=i),!e.edgesAreConnected)throw new Error("Disconnected polygon edges");const n=e.edges.map(e=>U(e.origin,t.canvas));t.beginPath(),t.moveTo(n[0].x,n[0].y);for(const s of n.slice(1))t.lineTo(s.x,s.y);t.fill()}function U(t,{width:e,height:i}){const n=t.added(new L(1,1)).scaled(.5);return new L(e*n.x,i*(1-n.y))}function G(t,{width:e,height:i}){const n=new L(t.x/e,1-t.y/i);return n.added(new L(-.5,-.5)).scaled(2)}var J={props:{simulation:Object},data(){return{running:!0}},destroyed(){this.running=!1},mounted(){const t=e=>{this.running&&(this.simulation.integrateTime(e),this.simulation.redraw(),requestAnimationFrame(t))};requestAnimationFrame(t)},methods:{reEmit(t,e){const{canvas:i}=this.simulation.drawing.context;this.$emit(t,G(this.clickPosition(e),i))},clickPosition(t){const{canvas:e}=this.simulation.drawing.context,{left:i,top:n}=e.getBoundingClientRect();return new L(t.clientX-i,t.clientY-n)}}},X=J,Y=Object(g["a"])(X,k,C,!1,null,null,null);Y.options.__file="SimulationDisplay.vue";var H=Y.exports;const K=.08,Q=K*K,W=.05;var Z={components:{SimulationDisplay:H},props:{simulation:Object},data(){return{selection:{particle:void 0,wasFixed:void 0},previousPosition:void 0}},methods:{onMouseMove(t){void 0!==this.selection.particle&&(this.previousPosition=this.selection.particle.position,this.selection.particle.velocity=L.zero,this.selection.particle.position=t)},onMouseUp(t){void 0!==this.selection.particle&&(this.selection.wasFixed||(this.selection.particle.fixed=!1,this.throwSelectedParticle(t)),this.selection.particle=void 0)},onMouseDown(t){this.selection.particle=this.newlySelectedParticle(t),void 0!==this.selection.particle&&(this.selection.particle.position=t,this.selection.wasFixed=this.selection.particle.fixed,this.selection.particle.fixed=!0)},onMouseLeave(){void 0!==this.selection.particle&&(this.selection.wasFixed||(this.selection.particle.fixed=!1),this.selection.particle=void 0)},throwSelectedParticle(){if(void 0===this.previousPosition)return;const t=this.selection.particle.position.subtracted(this.previousPosition);this.selection.particle.velocity=t.scaled(W)},newlySelectedParticle(t){return F(this.simulation.engine.particles,e=>{const i=e.position.distanceSquared(t);if(!(i>Q))return i})}}},tt=Z,et=Object(g["a"])(tt,O,$,!1,null,null,null);et.options.__file="InteractiveSimulationDisplay.vue";var it=et.exports;const nt=3e3;class st{static get timestep(){return 6}constructor(){this.timeAccumulator=0,this.lastIntegrationTime=void 0}integrateTime(t){if(void 0===this.lastIntegrationTime)return void(this.lastIntegrationTime=t);const e=t-this.lastIntegrationTime;if(!(e>nt)){this.timeAccumulator+=e,this.lastIntegrationTime=t;while(this.timeAccumulator>=st.timestep)this.timeAccumulator-=st.timestep,this.integrateStep()}}integrateStep(){throw new d}}const rt=.012;class ot{constructor({position:t,mass:e=1,gravityScale:i=1,fixedRadius:n,fixed:s=!1}){this.position=t,this.gravityScale=i,this.force=L.zero,this.velocity=L.zero,this.mass=e,this.fixedRadius=n,this.fixed=s}applyGravity(t){this.force.add(new L(0,-t*this.mass).scaled(this.gravityScale))}update(t,e){this.fixed?this.velocity=L.zero:(this.applyGravity(t),this.updateVelocity(),this.applyDamping(e),this.updatePosition())}overlaps(t){const e=this.radius+t.radius;return e*e>=this.position.distanceSquared(t.position)}get radius(){return void 0!==this.fixedRadius?this.fixedRadius:rt*Math.sqrt(this.mass)}get speed(){return this.velocity.magnitude}get speedSquared(){return this.velocity.magnitudeSquared}applyDamping(t){this.velocity.scale(Math.pow(1-t,st.timestep))}updateVelocity(){this.velocity.add(this.acceleration.scaled(st.timestep))}updatePosition(){this.position.add(this.velocity.scaled(st.timestep))}get acceleration(){return this.force.scaled(1/this.mass)}}class at{solve(){throw new d}}class lt extends at{constructor(t){super(),this.particles=t}solve(){this.solveInterpenetration(),this.solveBounce()}solveInterpenetration(){const t=this.normal.scaled(this.interpenetration/2);this.particles[0].position.subtract(t),this.particles[1].position.add(t)}solveBounce(){this.particles[0].velocity=this.normal.scaled(-this.particles[1].mass*this.netSpeed/this.netMass),this.particles[1].velocity=this.normal.scaled(this.particles[0].mass*this.netSpeed/this.netMass)}get interpenetration(){const t=this.particles[0].position.distance(this.particles[1].position);return this.particles[0].radius+this.particles[1].radius-t}get normal(){return this.particles[0].position.direction(this.particles[1].position)}get netMass(){return this.particles[0].mass+this.particles[1].mass}get netSpeed(){return this.particles[0].speed+this.particles[1].speed}}const ct=13e-5,ut=ct*ct;class dt extends at{constructor({particle:t,terrainElement:e}){super(),this.particle=t,this.terrainElement=e}solve(){const t=this.edge(),e=this.normal(t),i=this.penetrationDepth(t);this.removePenetration(e,i),this.bounceParticle(e)||(this.slideParticle(t),this.applyFriction())}removePenetration(t,e){this.particle.position.add(t.scaled(e))}slideParticle(t){const e=t.offset.flippedTowards(this.particle.velocity);this.particle.velocity=this.particle.velocity.projected(e)}applyFriction(){this.particle.velocity.scale(1-this.terrainElement.friction)}bounceParticle(t){if(this.particle.speedSquared<ut)return!1;const e=this.particle.velocity.projected(t);return this.particle.velocity.subtract(e),this.particle.velocity.add(e.scaled(-this.terrainElement.restitution)),!0}edge(){return this.terrainElement.polygon.closestEdge(this.particle.position)}normal(t){return t.normal(this.particle.velocity.negated)}penetrationDepth(t){return t.distance(this.particle.position)}}const ht=10;function pt({x:t,y:e}){return t>=-ht&&t<=ht&&e>=-ht&&e<=ht}class ft extends st{constructor({timestep:t=ft.defaultTimestep,gravity:e=1e-6,damping:i=7e-4,particles:n=[],springs:s=[],terrain:r=[]}={}){super(t),this.gravity=e,this.particles=n,this.springs=s,this.terrain=r,this.damping=i}clearUselessParticles(){this.particles=this.particles.filter(t=>pt(t.position))}integrateStep(){this.resetForces(),this.updateSprings(),this.solveContacts(),this.updateParticles(),this.clearUselessParticles()}solveContacts(){this.findContacts();for(const t of this.findContacts())t.solve()}findContacts(){return[...this.findParticleContacts(),...this.findTerrainContacts()]}*findParticleContacts(){for(let t=0;t<this.particles.length-1;++t){const e=this.particles[t];for(const i of this.particles.slice(t+1))i.overlaps(e)&&(yield new lt([e,i]))}}*findTerrainContacts(){for(const t of this.particles)for(const e of this.terrain)e.polygon.containsPoint(t.position)&&(yield new dt({particle:t,terrainElement:e}))}resetForces(){for(const t of this.particles)t.force.reset()}updateSprings(){for(const t of this.springs)t.update(this.timestep)}updateParticles(){for(const t of this.particles)t.update(this.gravity,this.damping)}}class mt{constructor({origin:t,offset:e,end:i}){if(void 0!==e&&void 0!==i)throw new TypeError("Either offset or end may be specified, but not both");if(this.origin=t.cloned,void 0!==i)this.end=i;else{if(void 0===e)throw new TypeError("Either offset or end must be specified");this.offset=e}}almostEquals(t){return this.origin.almostEquals(t.origin)&&this.offset.almostEquals(t.offset)}normal(t){return this.offset.normal(t)}rayIntersects(t){const{t:e,u:i}=this.intersectionParameters(t);return void 0!==e&&void 0!==i&&(-T<e&&-T<i&&i<1+T)}intersects(t){const{t:e,u:i}=this.intersectionParameters(t);return void 0!==e&&void 0!==i&&(-T<e&&e<1+T&&-T<i&&i<1+T)}intersection(t){const{t:e,u:i}=this.intersectionParameters(t);if(void 0!==e&&void 0!==i&&!(e>1+T||e<-T||i>1+T||i<-T))return this.offset.scaled(e).added(this.origin)}intersectionParameters(t){const e=t.origin.subtracted(this.origin),i=this.offset.cross(t.offset);return R(i,0)?{}:{t:e.cross(t.offset)/i,u:e.negated.cross(this.offset)/-i}}containsPoint(t){return R(t.subtracted(this.origin).cross(this.offset),0)&&A({value:t.x,limits:[this.origin.x,this.end.x]})&&A({value:t.y,limits:[this.origin.y,this.end.y]})}closestPoint(t){const e=t.subtracted(this.origin).dot(this.offset),i=t.subtracted(this.end).dot(this.offset.negated);if(!I(e,i))return this.origin.distanceSquared(t)<this.end.distanceSquared(t)?this.origin:this.end;if(0===this.offset.x)return new L(this.origin.x,t.y);if(0===this.offset.y)return new L(t.x,this.origin.y);const n=this.offset.dot(t),s=(n*this.offset.y+this.offset.x*this.offset.cross(this.origin))/this.offset.magnitudeSquared;return new L((n-s*this.offset.y)/this.offset.x,s)}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){return this.closestPoint(t).distanceSquared(t)}get opposite(){return new mt({origin:this.origin,offset:this.offset.negated})}get end(){return this.origin.added(this.offset)}set end(t){this.offset=t.subtracted(this.origin)}get length(){return Math.sqrt(this.lengthSquared)}get lengthSquared(){return this.offset.x*this.offset.x+this.offset.y*this.offset.y}}const gt=1e5,vt="white",yt={hue:225,saturation:70,lightness:40},wt=360,xt="grey",bt="rgb(155, 200, 200)",_t="pink";class St{constructor({context:t,drawingForces:e=!1,drawingTerrain:i=!0,drawingSprings:n=!0,drawingParticles:s=!0}={}){this.context=t,this.drawingForces=e,this.drawingTerrain=i,this.drawingSprings=n,this.drawingParticles=s}redraw(t){this.context&&(this.clear(),this.drawTerrain(t.terrain),this.drawParticles(t.particles),this.drawSprings(t.springs),this.drawForces(t.particles))}clear(){B(this.context,vt)}drawTerrain(t){if(this.drawingTerrain)for(const{polygon:e}of t)V(this.context,e,bt)}drawForces(t){if(this.drawingForces)for(const e of t)N(this.context,new mt(e.position,e.force.scaled(gt)),_t)}drawParticles(t){if(!this.drawingParticles||0===t.length)return;let e=yt.hue;const i=Math.min((wt-yt.hue)/t.length,20);for(const n of t){const t=`hsl(${e}, ${yt.saturation}%, ${yt.lightness}%)`;z(this.context,{position:n.position,radius:n.radius},t),e-=i}}drawSprings(t){if(this.drawingSprings)for(const e of t)N(this.context,e.line,xt)}}var Pt={components:{InteractiveSimulationDisplay:it,RestartButton:j,GravitySlider:P},mixins:[y],methods:{createEngine(t){return new ft({gravity:t.gravity,damping:0,particles:[new ot({position:new L(0,0)})]})},createDrawing(){return new St}}},Et=Pt,Dt=Object(g["a"])(Et,l,c,!1,null,null,null);Dt.options.__file="ParticleDemo.vue";var Mt=Dt.exports,qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("tr",[i("td",[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}})],1)]),i("tr",[i("td",[i("RestartButton",{on:{click:t.restartEngine}})],1)]),i("tr",[i("td",[i("StiffnessSlider",{model:{value:t.stiffness,callback:function(e){t.stiffness=e},expression:"stiffness"}})],1)])])},jt=[],Ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"stiffness-slider"}},[t._v("\n    Stiffness\n  ")]),i("input",{attrs:{id:"stiffness-slider",type:"range",min:"1e-6",max:"1e-4",step:"1e-9"},domProps:{value:t.value},on:{input:function(e){t.$emit("input",Number(e.target.value))}}})])},$t=[],Tt={props:{value:Number}},Ft=Tt,Rt=Object(g["a"])(Ft,Ot,$t,!1,null,null,null);Rt.options.__file="StiffnessSlider.vue";var At=Rt.exports;class It{constructor(t){this.particles=t,this.restingLength=this.currentLength}update(){this.contract(this.particles[0],this.particles[1]),this.contract(this.particles[1],this.particles[0])}contract(t,e){throw new d}get line(){return new mt({origin:this.particles[0].position,end:this.particles[1].position})}get currentLength(){return this.particles[0].position.distance(this.particles[1].position)}get lengthDelta(){return this.currentLength-this.restingLength}}class Lt extends It{constructor({particles:t,stiffness:e}){super(t),this.stiffness=e}update(){this.contract(this.particles[0],this.particles[1]),this.contract(this.particles[1],this.particles[0])}contract(t,e){const i=t.position.direction(e.position);t.force.add(i.scaled(this.contractionMagnitude))}get contractionMagnitude(){return this.stiffness*this.lengthDelta}}var kt={components:{InteractiveSimulationDisplay:it,RestartButton:j,StiffnessSlider:At},mixins:[y],data(){return{stiffness:1e-5}},watch:{stiffness(t){this.simulation.engine.springs[0].stiffness=t}},methods:{createEngine(t){const e=[new ot({position:L.zero,mass:1,fixed:!0}),new ot({position:new L(-.2,.2),gravityScale:2.5,mass:1})];return new ft({gravity:t.gravity,damping:t.damping,particles:e,springs:[new Lt({particles:e,stiffness:this.stiffness})]})},createDrawing(){return new St}}},Ct=kt,Bt=Object(g["a"])(Ct,qt,jt,!1,null,null,null);Bt.options.__file="SpringDemo.vue";var zt=Bt.exports,Nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("tbody",[i("tr",[i("td",[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}})],1)]),i("tr",[i("td",[i("RestartButton",{on:{click:t.restartEngine}})],1)]),i("tr",[i("td",[i("RestitutionSlider",{attrs:{terrainElement:t.platform}})],1)]),i("tr",[i("td",[i("AngleSlider",{model:{value:t.platformAngle,callback:function(e){t.platformAngle=e},expression:"platformAngle"}})],1)]),i("tr",[i("td",[i("LengthSlider",{model:{value:t.platformLength,callback:function(e){t.platformLength=e},expression:"platformLength"}})],1)])])])},Vt=[],Ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"restitution-slider"}},[t._v("\n    Restitution\n  ")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.terrainElement.restitution,expression:"terrainElement.restitution",modifiers:{number:!0}}],attrs:{id:"restitution-slider",type:"range",min:"0",max:"0.9",step:"1e-9"},domProps:{value:t.terrainElement.restitution},on:{__r:function(e){t.$set(t.terrainElement,"restitution",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])},Gt=[],Jt={props:{terrainElement:Object}},Xt=Jt,Yt=Object(g["a"])(Xt,Ut,Gt,!1,null,null,null);Yt.options.__file="RestitutionSlider.vue";var Ht=Yt.exports,Kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"angle-slider"}},[t._v("\n    Angle\n  ")]),i("input",{attrs:{id:"angle-slider",type:"range",min:"-1.57",max:"1.57",step:"1e-9"},domProps:{value:t.value},on:{input:function(e){t.$emit("input",Number(e.target.value))}}})])},Qt=[],Wt={props:{value:Number}},Zt=Wt,te=Object(g["a"])(Zt,Kt,Qt,!1,null,null,null);te.options.__file="AngleSlider.vue";var ee=te.exports,ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{attrs:{for:"length-slider"}},[t._v("\n    Length\n  ")]),i("input",{attrs:{id:"length-slider",type:"range",min:"0.2",max:"4",step:"1e-9"},domProps:{value:t.value},on:{input:function(e){t.$emit("input",Number(e.target.value))}}})])},ne=[],se={props:{value:Number}},re=se,oe=Object(g["a"])(re,ie,ne,!1,null,null,null);oe.options.__file="LengthSlider.vue";var ae=oe.exports;class le{static fromVertices(t){if(t.length<3)throw new Error("Polygon must have at least three vertices");return le.fromEdges(Array.from(e()));function*e(){for(let e=0;e<t.length-1;++e)yield new mt({origin:t[e].cloned,end:t[e+1].cloned});yield new mt({origin:t[t.length-1].cloned,end:t[0].cloned})}}static fromEdges(t){if(t.length<3)throw new Error("Polygon must have at least three edges");return new le(t)}constructor(t){this.edges=t}get vertices(){return this.edges.map(t=>t.origin)}get edgesAreConnected(){for(let t=1;t<this.edges.length;++t)if(!this.edges[t].origin.almostEquals(this.edges[t-1].end))return!1;return!!this.edges[0].origin.almostEquals(this.edges[this.edges.length-1].end)}containsPoint(t){if(this.isVertex(t))return!0;const e=new mt({origin:t,offset:new L(1,0)});return this.countIntersections(e)%2===1}isVertex(t){return this.vertices.some(e=>e.almostEquals(t))}countIntersections(t){return this.edges.reduce((e,i)=>{return t.rayIntersects(i)?e+1:e},0)}closestEdge(t){return F(this.edges,e=>e.distance(t))}}class ce{constructor({polygon:t,restitution:e=0,friction:i=0}){this.polygon=t,this.restitution=e,this.friction=i}}function ue(){return new L(0,.9)}var de={components:{InteractiveSimulationDisplay:it,RestartButton:j,RestitutionSlider:Ht,AngleSlider:ee,LengthSlider:ae},mixins:[y],data(){const t=.45;return{particle:new ot({position:ue,mass:1}),platform:new ce({polygon:le.fromVertices([new L(-.5,0),new L(.5,0),new L(.5,-2),new L(-.5,-2)]),restitution:t,friction:.01}),platformAngle:0,platformLength:1,platformRestitution:t}},watch:{platformAngle(){this.updatePlatformLayout()},platformLength(){this.updatePlatformLayout()},platformRestitution(){for(const t of this.simulation.engine.terrain)t.restitution=this.platformRestitution}},methods:{createEngine(t){return this.particle.position=ue(),this.particle.velocity=L.zero,new ft({gravity:t.gravity,damping:t.damping,particles:[this.particle],terrain:[this.platform,new ce({restitution:this.platformRestitution,friction:.01,polygon:le.fromVertices([new L(.8,5),new L(4,5),new L(4,-5),new L(.8,-5)])})]})},createDrawing(){return new St},updatePlatformLayout(){const t=this.platformLength/2,e=t*Math.cos(this.platformAngle),i=t*Math.sin(this.platformAngle);this.platform.polygon=le.fromVertices([new L(-e,-i),new L(e,i),new L(e,-2),new L(-e,-2)]),this.simulation.engine.terrain[0].polygon=this.platform.polygon}}},he=de,pe=Object(g["a"])(he,Nt,Vt,!1,null,null,null);pe.options.__file="TerrainDemo.vue";var fe=pe.exports,me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("tbody",[i("tr",[i("td",[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}})],1)]),i("tr",[i("td",[i("RestartButton",{on:{click:t.restartEngine}})],1)]),i("tr",[i("td",[i("label",[t._v("Force")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.firingForce,expression:"firingForce",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"1e-3",step:"1e-9"},domProps:{value:t.firingForce},on:{__r:function(e){t.firingForce=t._n(e.target.value)},blur:function(e){t.$forceUpdate()}}})])]),i("tr",[i("td",[i("ParticleMassSliders",{attrs:{particles:t.particles,min:1,max:5}})],1)])])])},ge=[],ve=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("tbody",t._l(t.particles,function(e,n){return i("tr",{key:n},[i("label",{attrs:{for:"mass-input"+n}},[t._v("\n        Particle "+t._s(n)+" mass\n      ")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.mass,expression:"particle.mass",modifiers:{number:!0}}],attrs:{id:"mass-input"+n,type:"range",min:t.min,max:t.max,step:"1e-9"},domProps:{value:e.mass},on:{__r:function(i){t.$set(e,"mass",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})])}),0)])},ye=[],we={props:{particles:Array,min:Number,max:Number}},xe=we,be=Object(g["a"])(xe,ve,ye,!1,null,null,null);be.options.__file="ParticleMassSliders.vue";var _e=be.exports;const Se=new L(-.5,0),Pe=new L(.5,0);class Ee extends ot{constructor({firingForce:t,...e}){super(e),this.firingForce=t,this.fired=!1}updateVelocity(t){this.fired||(this.fired=!0,this.force.add(this.firingForce)),super.updateVelocity(t)}}var De={components:{InteractiveSimulationDisplay:it,RestartButton:j,ParticleMassSliders:_e},mixins:[y],data(){const t=13e-5;return{firingForce:t,particles:[new Ee({position:Se.cloned,mass:1,firingForce:new L(t,0)}),new Ee({position:Pe.cloned,mass:1,firingForce:new L(-t,0)})]}},methods:{createEngine(){return this.particles[0].position=Se.cloned,this.particles[0].velocity=L.zero,this.particles[0].fired=!1,this.particles[0].firingForce=new L(this.firingForce,0),this.particles[1].position=Pe.cloned,this.particles[1].velocity=L.zero,this.particles[1].fired=!1,this.particles[1].firingForce=new L(-this.firingForce,0),new ft({gravity:0,particles:this.particles})},createDrawing(){return new St}}},Me=De,qe=Object(g["a"])(Me,me,ge,!1,null,null,null);qe.options.__file="ParticleCollisionDemo.vue";var je=qe.exports,Oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("tr",[i("td",[i("InteractiveSimulationDisplay",{attrs:{simulation:t.simulation}})],1)]),i("tr",[i("td",[i("RestartButton",{on:{click:t.restartEngine}})],1)])])},$e=[];class Te extends It{contract(t,e){t.fixed||(e.fixed?this.contractOne(t,e):this.contractBoth(t,e))}contractOne(t,e){const i=t.position.direction(e.position);t.position.add(i.scaled(this.lengthDelta))}contractBoth(t,e){const i=t.position.direction(e.position),n=t.mass+e.mass;t.position.add(i.scaled(this.lengthDelta*e.mass/n))}}var Fe={components:{InteractiveSimulationDisplay:it,RestartButton:j},mixins:[y],methods:{createEngine(){const t=[new ot({position:new L(0,.8)}),new ot({position:new L(-.35,.5)})];return new ft({particles:t,springs:[new Te(t)],terrain:[new ce({polygon:le.fromVertices([new L(-5,0),new L(.7,0),new L(.7,5),new L(5,5),new L(5,-5),new L(-5,-5)]),restitution:.3})]})},createDrawing(){return new St}}},Re=Fe,Ae=Object(g["a"])(Re,Oe,$e,!1,null,null,null);Ae.options.__file="RodDemo.vue";var Ie=Ae.exports,Le={data(){return{demos:[{title:"Particle Demo",component:Mt},{title:"Spring Demo",component:zt},{title:"Terrain Demo",component:fe},{title:"Particle Collision Demo",component:je},{title:"Rod Demo",component:Ie}],currentDemo:void 0}}},ke=Le,Ce=Object(g["a"])(ke,o,a,!1,null,null,null);Ce.options.__file="DemoChoice.vue";var Be=Ce.exports,ze={components:{DemoChoice:Be}},Ne=ze,Ve=Object(g["a"])(Ne,s,r,!1,null,null,null);Ve.options.__file="App.vue";var Ue=Ve.exports;n["a"].config.productionTip=!1,new n["a"]({el:"#app",render:t=>t(Ue)})}});
//# sourceMappingURL=app.ab630ba0.js.map